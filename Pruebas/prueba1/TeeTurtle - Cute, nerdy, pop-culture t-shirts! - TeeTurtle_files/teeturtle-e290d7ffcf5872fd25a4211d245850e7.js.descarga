/*
 typeahead.js 0.11.1
 https://github.com/twitter/typeahead.js
 Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,a,k){b instanceof String&&(b=String(b));for(var m=b.length,l=0;l<m;l++){var n=b[l];if(a.call(k,n,l,b))return{i:l,v:n}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,k){b!=Array.prototype&&b!=Object.prototype&&(b[a]=k.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(b,a,k,m){if(a){k=$jscomp.global;b=b.split(".");for(m=0;m<b.length-1;m++){var l=b[m];l in k||(k[l]={});k=k[l]}b=b[b.length-1];m=k[b];a=a(m);a!=m&&null!=a&&$jscomp.defineProperty(k,b,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};
$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function a(){this.batch_=null}function k(a){return a instanceof l?a:new l(function(b,k){b(a)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;a.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};a.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var m=$jscomp.global.setTimeout;a.prototype.asyncExecuteFunction=function(a){m(a,
0)};a.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var k=a[b];a[b]=null;try{k()}catch(w){this.asyncThrow_(w)}}}this.batch_=null};a.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var l=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(u){b.reject(u)}};l.prototype.createResolveAndReject_=
function(){function a(a){return function(q){k||(k=!0,a.call(b,q))}}var b=this,k=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};l.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof l)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};l.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(u){this.reject_(u);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};l.prototype.reject_=function(a){this.settle_(2,a)};l.prototype.fulfill_=function(a){this.settle_(1,a)};l.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};l.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
0;a<this.onSettledCallbacks_.length;++a)n.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var n=new a;l.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};l.prototype.settleSameAsThenable_=function(a,b){var k=this.createResolveAndReject_();try{a.call(b,k.resolve,k.reject)}catch(w){k.reject(w)}};l.prototype.then=function(a,b){function k(a,c){return"function"==typeof a?function(c){try{m(a(c))}catch(d){q(d)}}:
c}var m,q,h=new l(function(a,c){m=a;q=c});this.callWhenSettled_(k(a,m),k(b,q));return h};l.prototype.catch=function(a){return this.then(void 0,a)};l.prototype.callWhenSettled_=function(a,b){function k(){switch(l.state_){case 1:a(l.result_);break;case 2:b(l.result_);break;default:throw Error("Unexpected state: "+l.state_);}}var l=this;null==this.onSettledCallbacks_?n.asyncExecute(k):this.onSettledCallbacks_.push(k)};l.resolve=k;l.reject=function(a){return new l(function(b,k){k(a)})};l.race=function(a){return new l(function(b,
l){for(var m=$jscomp.makeIterator(a),q=m.next();!q.done;q=m.next())k(q.value).callWhenSettled_(b,l)})};l.all=function(a){var b=$jscomp.makeIterator(a),m=b.next();return m.done?k([]):new l(function(a,q){function h(b){return function(d){e[b]=d;c--;0==c&&a(e)}}var e=[],c=0;do e.push(void 0),c++,k(m.value).callWhenSettled_(h(e.length-1),q),m=b.next();while(!m.done)})};return l},"es6","es3");$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(b,a){for(var k=1;k<arguments.length;k++){var m=arguments[k];if(m)for(var l in m)$jscomp.owns(m,l)&&(b[l]=m[l])}return b};$jscomp.polyfill("Object.assign",function(b){return b||$jscomp.assign},"es6","es3");
$(document).ready(function(){$(".overlayNav").on("click",function(){$("#sidebar").toggleClass("active");$(".overlayNav").toggleClass("active")});$("#navToggler").on("click",function(){$("#sidebar").toggleClass("active");$(".overlayNav").toggleClass("active");$(".collapse.in").toggleClass("in");$("a[aria-expanded=true]").attr("aria-expanded","false")})});
$(document).ready(function(){$("body").on("click","#cart-drawer .btn-number",function(b){b.preventDefault();fieldName=$(this).attr("data-field");type=$(this).attr("data-type");b=$('#cart-drawer input[name="'+fieldName+'"]');var a=parseInt(b.val());$(b).data("oldValue",a);var k=parseInt($("#cartOpen .cart-counter").text());isNaN(a)?b.val(0).change():"minus"==type?(a>b.attr("min")&&(b.val(a-1).change(),$("#cartOpen .cart-counter").html(k-1)),parseInt(b.val())==b.attr("min")&&$(this).attr("disabled",
!0)):"plus"==type&&(b.val(a+1).change(),$("#cartOpen .cart-counter").html(k+1))});$("body").on("focusin","#cart-drawer .input-number",function(){$(this).data("oldValue",$(this).val())});$("body").on("change","#cart-drawer .input-number",function(){var b=this,a=parseInt($(this).attr("min")),k=parseInt($(this).val()),m=parseInt($(this).attr("data-id")),l=parseInt($("#cartOpen .cart-counter").text()),n=parseInt(k-$(this).data("oldValue")),t=$(this).attr("name");k>=a?$('#cart-drawer .btn-number[data-type="minus"][data-field="'+
t+'"]').removeAttr("disabled"):($(this).val($(this).data("oldValue")),k=$(this).data("oldValue"));null!=m&&0<m&&$.ajax({url:"/cart/update/"+m+"?qty="+k,dataType:"json",cache:!1,success:function(a,k,m){"undefined"!=typeof a.status&&"success"==a.status?($.pjax.reload("#cart-drawer",{fragment:"#cart-drawer",timeout:3E4}),$("#cartOpen .cart-counter").html(l+n)):($(b).val($(b).data("oldValue")),"undefined"!=typeof a.content&&alert(a.content))},error:function(a,k,l){$(b).val($(b).data("oldValue"));alert("There was an error updating an item in your Cart")}})});
$("body").on("keydown","#cart-drawer .input-number",function(b){-1!==$.inArray(b.keyCode,[46,8,9,27,13,35,36,37,39])||65==b.keyCode&&!0===b.ctrlKey||(38==b.keyCode&&$(this).val(parseInt($(this).val())+1).change(),40==b.keyCode&&(b.preventDefault(),$(this).val(parseInt($(this).val())-1).change()),(b.shiftKey||48>b.keyCode||57<b.keyCode)&&(96>b.keyCode||105<b.keyCode)&&b.preventDefault())});$("body").on("click","#dismissCart, .overlayCart",function(){$("#cart, #cart-email-prompt, #cart-sign-up, #cart-sign-in").removeClass("active");
$(".overlayCart").removeClass("active");$("body").removeClass("modal-open")});$("body").on("click",".cart-back-btn",function(){var b=$(this).closest(".cart-drawer").attr("id");$("#"+b).removeClass("active")});$("body").on("click","#cartOpen",function(){$("body").addClass("modal-open");$("#cart").addClass("active");$(".overlayCart").addClass("active");$("a[aria-expanded=true]").attr("aria-expanded","false");setTimeout(function(){$(".checkout-buttons").hide().show(0)},300)});$("body").on("click","button#checkOut",
function(){$("#email-prompt #checkemailform-email").val("");$("#email-prompt .form-group.field-checkemailform-email").removeClass("has-success").removeClass("has-error");$("#email-prompt .form-group.field-checkemailform-email > p").html("");$("#cart").addClass("active");$(".overlayCart").not(".active").addClass("active");$("#cart-email-prompt").addClass("active");$("a[aria-expanded=true]").attr("aria-expanded","false")})});
$(document).ready(function(){992>$(window).width()&&($("#heroBanner").removeClass("d-none"),$("#heroBanner").slick({infinite:!0,speed:300,slidesToShow:1}));$(window).on("resize",function(){992>$(this).width()?$("#heroBanner").hasClass("slick-slider")||($("#heroBanner").removeClass("d-none"),$("#heroBanner").slick({infinite:!0,speed:300,slidesToShow:1})):$("#heroBanner").hasClass("slick-slider")&&$("#heroBanner").slick("unslick")})});
$(document).ready(function(){$("#logoBar").removeClass("d-none");$("#logoBar").slick({infinite:!0,speed:300,slidesToShow:1,variableWidth:!0})});$(document).ready(function(){"#returns-exchanges"==location.hash&&$("#faq-returns-0.collapse").collapse("show")});$("body").on("change","#contactform-subject",function(b){$("#supportTopicTabs li a#tab-"+$(this).find("option:selected").attr("data-id")).tab("show")});
var product,quick_product,variants=[],quick_variants=[],character_customizer=[],selected_character=null,loadingLayerStack=[];
function checkvariantsInStock(){$("#form-product .form-group.options-values").each(function(){var b=[],a=$(this).prevAll(".form-group.options-values");0<a.length&&0<a.find("label.selected").length&&a.find("label.selected").each(function(){b.push($(this).attr("data-attribute"))});0<b.length?$(this).find("label").each(function(){var a=!1,m=!1;if("undefined"!=typeof variants&&null!=variants)for(i in variants){var l=!0;for(j in b)0>$.inArray(b[j],variants[i].attributes)&&(l=!1);1==l&&0<=$.inArray($(this).attr("data-attribute"),
variants[i].attributes)&&(m=!0,0<variants[i].qty&&(a=!0))}else m=a=!1;0==a?$(this).addClass("disabled"):$(this).removeClass("disabled");0==m?$(this).hide():$(this).show()}):$(this).find("label").each(function(){var a=!1,b=!1;if("undefined"!=typeof variants&&null!=variants)for(i in variants)0<=$.inArray($(this).attr("data-attribute"),variants[i].attributes)&&(b=!0,0<variants[i].qty&&(a=!0));0==a?$(this).addClass("disabled"):$(this).removeClass("disabled");0==b?$(this).hide():$(this).show()})});$("#form-product .form-group.options-values").each(function(){$(this).find("label.selected.disabled").length&&
$(this).find("label:not(.disabled):first")&&$(this).find("label:not(.disabled):first").trigger("click")})}
function checkquickvariantsInStock(){$("#form-quick-product .form-group.options-values").each(function(){var b=[],a=$(this).prevAll(".form-group.options-values");0<a.length&&0<a.find("label.selected").length&&a.find("label.selected").each(function(){b.push($(this).attr("data-attribute"))});0<b.length?$(this).find("label").each(function(){var a=!1,m=!1;if("undefined"!=typeof quick_variants&&null!=quick_variants)for(i in quick_variants){var l=!0;for(j in b)0>$.inArray(b[j],quick_variants[i].attributes)&&
(l=!1);1==l&&0<=$.inArray($(this).attr("data-attribute"),quick_variants[i].attributes)&&(m=!0,0<quick_variants[i].qty&&(a=!0))}else m=a=!1;0==a?$(this).addClass("disabled"):$(this).removeClass("disabled");0==m?$(this).hide():$(this).show()}):$(this).find("label").each(function(){var a=!1,b=!1;if("undefined"!=typeof quick_variants&&null!=quick_variants)for(i in quick_variants)0<=$.inArray($(this).attr("data-attribute"),quick_variants[i].attributes)&&(b=!0,0<quick_variants[i].qty&&(a=!0));0==a?$(this).addClass("disabled"):
$(this).removeClass("disabled");0==b?$(this).hide():$(this).show()})});$("#form-quick-product .form-group.options-values").each(function(){$(this).find("label.selected.disabled").length&&$(this).find("label:not(.disabled):first")&&$(this).find("label:not(.disabled):first").trigger("click")})}
$(document).ready(function(){$("body").on("click","#form-product .style-label",function(b){if($(this).hasClass("disabled"))b.preventDefault();else{$(this).parent().find("input").removeAttr("checked");$(this).parent().find(".style-label").removeClass("selected");$("#form-product #"+$(this).attr("for")).attr("checked","checked");$(this).addClass("selected");var a=0,k=product.price,m=product.compare_at_price,l=0,n=!1,t=product.preorder,y=product.preorder_msg,u=null;if("undefined"!=typeof variants&&null!=
variants)for(i in variants){var w=!0;$("#form-product .product-options label.selected").each(function(){0>$.inArray($(this).attr("data-attribute"),variants[i].attributes)&&(w=!1)});if(1==w){n=!0;0>=variants[i].qty&&(n=!1);l=i;if("undefined"!=typeof variants[i].image&&null!=variants[i].image&&""!=variants[i].image){var q=parseInt(variants[i].image);$("#form-product #productImages .carousel-item[data-id="+q+"]").length&&(a=parseInt($("#form-product #productImages .carousel-item[data-id="+q+"]").attr("data-index")))}"undefined"!=
typeof variants[i].price&&null!=variants[i].price&&(k=variants[i].price);"undefined"!=typeof variants[i].compare_at_price&&null!=variants[i].compare_at_price&&(m=variants[i].compare_at_price);"undefined"!=typeof variants[i].url&&null!=variants[i].url&&(u=variants[i].url);"undefined"!=typeof variants[i].preorder&&null!=variants[i].preorder&&(t=variants[i].preorder);"undefined"!=typeof variants[i].preorder_msg&&null!=variants[i].preorder_msg&&(y=variants[i].preorder_msg);$("#form-product #product-variant-id").val(l)}}$("#form-product .product-header .price").html(k+
' <span class="compare-at-price">'+m+"</span>");1==t?($("#form-product .preorder-msg").html("This product is currently being restocked and may take an additional "+y+" to ship"),$("#form-product .preorder-msg").removeClass("d-none"),$("#form-product #addToCartButton").removeClass("add-to-cart-btn").addClass("preorder-btn").html("Preorder")):($("#form-product .preorder-msg").addClass("d-none"),$("#form-product #addToCartButton").addClass("add-to-cart-btn").removeClass("preorder-btn").html("Add to Cart"));
"undefined"!=typeof b.originalEvent&&$("#form-product #productImages").carousel(a);"undefined"!=typeof u&&null!=u&&history.replaceState({},null,u);n?($("#form-product #addToCartWrapper").show(),$("#form-product #notAvailableWrapper").hide()):($("#form-product #addToCartWrapper").hide(),$("#form-product #notAvailableWrapper").show(),$("#form-product #product-variant-id").val(0));checkvariantsInStock()}});$("body").on("click","#form-quick-product .style-label",function(b){if($(this).hasClass("disabled"))b.preventDefault();
else{$(this).parent().find("input").removeAttr("checked");$(this).parent().find(".style-label").removeClass("selected");$("#form-quick-product #"+$(this).attr("for")).attr("checked","checked");$(this).addClass("selected");var a=0,k=quick_product.price,m=quick_product.compare_at_price,l=0,n=!1,t=quick_product.preorder,y=quick_product.preorder_msg;if("undefined"!=typeof quick_variants&&null!=quick_variants)for(i in quick_variants){var u=!0;$("#form-quick-product .product-options label.selected").each(function(){0>
$.inArray($(this).attr("data-attribute"),quick_variants[i].attributes)&&(u=!1)});if(1==u){n=!0;0>=quick_variants[i].qty&&(n=!1);l=i;if("undefined"!=typeof quick_variants[i].image&&null!=quick_variants[i].image&&""!=quick_variants[i].image){var w=parseInt(quick_variants[i].image);$("#form-quick-product #productImages .carousel-item[data-id="+w+"]").length&&(a=parseInt($("#form-quick-product #productImages .carousel-item[data-id="+w+"]").attr("data-index")))}"undefined"!=typeof quick_variants[i].price&&
null!=quick_variants[i].price&&(k=quick_variants[i].price);"undefined"!=typeof quick_variants[i].compare_at_price&&null!=quick_variants[i].compare_at_price&&(m=quick_variants[i].compare_at_price);"undefined"!=typeof quick_variants[i].preorder&&null!=quick_variants[i].preorder&&(t=quick_variants[i].preorder);"undefined"!=typeof quick_variants[i].preorder_msg&&null!=quick_variants[i].preorder_msg&&(y=quick_variants[i].preorder_msg);$("#form-quick-product #product-variant-id").val(l)}}$("#form-quick-product .product-header .price").html(k+
' <span class="compare-at-price">'+m+"</span>");1==t?($("#form-quick-product .preorder-msg").html("This product is currently being restocked and may take an additional "+y+" to ship"),$("#form-quick-product .preorder-msg").removeClass("d-none"),$("#form-quick-product #addToCartButton").removeClass("add-to-cart-btn").addClass("preorder-btn").html("Preorder")):($("#form-quick-product .preorder-msg").addClass("d-none"),$("#form-quick-product #addToCartButton").addClass("add-to-cart-btn").removeClass("preorder-btn").html("Add to Cart"));
"undefined"!=typeof b.originalEvent&&$("#form-quick-product #productImages").carousel(a);n?($("#form-quick-product #addToCartWrapper").show(),$("#form-quick-product #notAvailableWrapper").hide()):($("#form-quick-product #addToCartWrapper").hide(),$("#form-quick-product #notAvailableWrapper").show(),$("#form-quick-product #product-variant-id").val(0));checkquickvariantsInStock()}});$("body").on("click","#form-product #addToCartButton",function(){var b=$("#form-product");$.ajax({url:b.attr("action"),
dataType:"json",type:"POST",data:b.serialize(),cache:!1,success:function(a,b,m){"undefined"!=typeof a.status&&($.pjax.reload("#cart-drawer",{fragment:"#cart-drawer",timeout:3E4}),"undefined"!=typeof a.content&&"success"!=a.status&&alert(a.content),$("#quickAddModal").modal("hide"),a=parseInt($("#cartOpen .cart-counter").text()),$("#cartOpen .cart-counter").html(a+1))},error:function(a,b,m){alert("There was an error adding an item to your Cart")}});return!1});$("body").on("click","#form-quick-product #addToCartButton",
function(){var b=$("#form-quick-product");$.ajax({url:b.attr("action"),dataType:"json",type:"POST",data:b.serialize(),cache:!1,success:function(a,b,m){"undefined"!=typeof a.status&&($.pjax.reload("#cart-drawer",{fragment:"#cart-drawer",timeout:3E4}),"undefined"!=typeof a.content&&"success"!=a.status&&alert(a.content),$("#quickAddModal").modal("hide"),a=parseInt($("#cartOpen .cart-counter").text()),$("#cartOpen .cart-counter").html(a+1))},error:function(a,b,m){alert("There was an error adding an item to your Cart")}});
return!1});$("body").on("click","#cart-drawer .remove-item",function(){$.ajax({url:$(this).attr("href"),dataType:"json",cache:!1,success:function(b,a,k){"undefined"!=typeof b.status&&"success"==b.status?$.pjax.reload("#cart-drawer",{fragment:"#cart-drawer",timeout:3E4}):alert("There was an error removing an item from your Cart")},error:function(b,a,k){alert("There was an error removing an item from your Cart")}});return!1});$("#email-prompt").on("beforeSubmit",function(b){var a=$(this);!0===a.data("submitted")?
(b.preventDefault(),console.log("Prevented")):(a.data("submitted",!0),$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serializeArray()}).done(function(b){b.success?(b.existing?($("#sign-in").find("#loginform-email").val(a.find("#checkemailform-email").val()),$("#cart-sign-in").addClass("active")):($("#sign-up").find("#signupform-email").val(a.find("#checkemailform-email").val()),$("#cart-sign-up").addClass("active")),$("a[aria-expanded=true]").attr("aria-expanded","false")):b.validation?
a.yiiActiveForm("updateMessages",b.validation,!0):a.yiiActiveForm("updateMessages",{"checkemailform-email":["There was an error checking your Email"]},!0);a.data("submitted",!1)}).fail(function(){a.yiiActiveForm("updateMessages",{"checkemailform-email":["There was an error checking your Email"]},!0);a.data("submitted",!1)}));return!1});$("#sign-in").on("beforeSubmit",function(b){var a=$(this);!0===a.data("submitted")?(b.preventDefault(),console.log("Prevented")):(a.data("submitted",!0),$.ajax({type:a.attr("method"),
url:a.attr("action"),data:a.serializeArray()}).done(function(b){b.success?window.location.href="/cart/checkout":(b.validation?a.yiiActiveForm("updateMessages",b.validation,!0):a.yiiActiveForm("updateMessages",{"loginform-email":["There was an error signing you in"]},!0),a.data("submitted",!1))}).fail(function(){a.yiiActiveForm("updateMessages",{"loginform-email":["There was an error signing you in"]},!0);a.data("submitted",!1)}));return!1});$("#sign-up").on("beforeSubmit",function(b){var a=$(this);
!0===a.data("submitted")?(b.preventDefault(),console.log("Prevented")):(a.data("submitted",!0),$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serializeArray()}).done(function(b){b.success?window.location.href="/cart/checkout":(b.validation?a.yiiActiveForm("updateMessages",b.validation,!0):a.yiiActiveForm("updateMessages",{"signupform-email":["There was an error signing you up"]},!0),a.data("submitted",!1));"undefined"!=a.data("grecaptchacode")&&grecaptcha.ready(function(){grecaptcha.execute(a.data("grecaptchacode"),
{action:"signup"}).then(function(a){$("#signupform-verifycode").val(a)})})}).fail(function(){a.yiiActiveForm("updateMessages",{"signupform-email":["There was an error signing you up"]},!0);a.data("submitted",!1)}));return!1});$("body").on("click","#cartPage .btn-number",function(b){b.preventDefault();fieldName=$(this).attr("data-field");type=$(this).attr("data-type");b=$('#cartPage input[name="'+fieldName+'"]');var a=parseInt(b.val());$(b).data("oldValue",a);isNaN(a)?b.val(0).change():"minus"==type?
(a>b.attr("min")&&b.val(a-1).change(),parseInt(b.val())==b.attr("min")&&$(this).attr("disabled",!0)):"plus"==type&&b.val(a+1).change()});$("body").on("focusin","#cartPage .input-number",function(){$(this).data("oldValue",$(this).val())});$("body").on("change","#cartPage .input-number",function(){var b=this,a=parseInt($(this).attr("min")),k=parseInt($(this).val()),m=parseInt($(this).attr("data-id")),l=$(this).attr("name");k>=a?$('#cartPage .btn-number[data-type="minus"][data-field="'+l+'"]').removeAttr("disabled"):
($(this).val($(this).data("oldValue")),k=$(this).data("oldValue"));null!=m&&0<m&&$.ajax({url:"/cart/update/"+m+"?qty="+k,dataType:"json",cache:!1,success:function(a,k,l){"undefined"!=typeof a.status&&"success"==a.status?$.pjax.reload("#cartPage",{fragment:"#cartPage",timeout:3E4}):($(b).val($(b).data("oldValue")),"undefined"!=typeof a.content&&alert(a.content))},error:function(a,k,l){$(b).val($(b).data("oldValue"));alert("There was an error updating an item in your Cart")}})});$("body").on("keydown",
"#cartPage .input-number",function(b){-1!==$.inArray(b.keyCode,[46,8,9,27,13,35,36,37,39])||65==b.keyCode&&!0===b.ctrlKey||(38==b.keyCode&&$(this).val(parseInt($(this).val())+1).change(),40==b.keyCode&&(b.preventDefault(),$(this).val(parseInt($(this).val())-1).change()),(b.shiftKey||48>b.keyCode||57<b.keyCode)&&(96>b.keyCode||105<b.keyCode)&&b.preventDefault())});$("body").on("click","#orderSummary .remove-item-checkout",function(){$.ajax({url:$(this).attr("href"),dataType:"json",cache:!1,success:function(b,
a,k){if("undefined"!=typeof b.status&&"success"==b.status){$("#checkout-content #checkout-alert-container").html("");var m=jQuery.Event("submit");m.target=$("#checkout-form")[0];m.currentTarget=$("#checkout-form")[0];setTimeout(function(){$.pjax.submit(m,"#checkout-summary",{push:!1,replace:!1,scrollTo:!1,timeout:3E4})},100)}else alert("There was an error removing an item from your order")},error:function(b,a,k){alert("There was an error removing an item from your order")}});return!1});$("body").on("click",
"#order-summary-wrapper .remove-discount",function(){$.ajax({url:$(this).attr("href"),dataType:"json",cache:!1,success:function(b,a,k){if("undefined"!=typeof b.status&&"success"==b.status){$("#checkout-content #checkout-alert-container").html("");var m=jQuery.Event("submit");m.target=$("#checkout-form")[0];m.currentTarget=$("#checkout-form")[0];setTimeout(function(){$.pjax.submit(m,"#checkout-summary",{push:!1,replace:!1,scrollTo:!1,timeout:3E4})},100)}else alert("There was an error performing this action")},
error:function(b,a,k){alert("There was an error performing this action")}});return!1});$("body").on("change","#checkout-form #order-shipping_address_country, #checkout-form #order-shipping_address_state",function(){var b=jQuery.Event("submit");b.target=$("#checkout-form")[0];b.currentTarget=$("#checkout-form")[0];setTimeout(function(){$.pjax.submit(b,"#checkout-summary",{push:!1,replace:!1,scrollTo:!1,timeout:3E4})},100);return!1});$("body").on("blur","#checkout-form #order-email, #checkout-form #order-shipping_address_zip, #checkout-form #order-shipping_address_city",
function(){var b=jQuery.Event("submit");b.target=$("#checkout-form")[0];b.currentTarget=$("#checkout-form")[0];setTimeout(function(){$.pjax.submit(b,"#checkout-summary",{push:!1,replace:!1,scrollTo:!1,timeout:3E4})},100);return!1});$("body").on("click",'#checkout-summary input[name="order_shipping_rate"]',function(){var b=parseFloat($(this).attr("data-price")),a=$(this).attr("data-currency-prefix")||"",k=$(this).attr("data-currency-suffix")||"",m=parseFloat($("#checkout-summary #order-subtotal-amount").attr("data-price")),
l=parseFloat($("#checkout-summary #order-discount-amount").attr("data-price"))||0,n=giftcard=parseFloat($("#checkout-summary #order-giftcard-amount").attr("data-balance"))||0,t=parseFloat($("#checkout-summary #order-tax-amount").attr("data-price"))||0;b=b+m+t-l;0<n&&(giftcard=Math.min(b,n),b-=giftcard,$("#checkout-summary .order-total .giftcard .ammount").html("-"+a+number_format(giftcard,2,".","")+k));$("#checkout-summary .order-total .total .ammount").html(a+number_format(b,2,".","")+k);$("#checkout-form #order-shipping_rate").val($(this).val());
0>=b?0<$('#checkout-summary input[name="license_error"]').length?($("#checkout-content #checkout-button-wrapper").hide(),$("#paypal-button").hide(),$("#checkout-content #checkout-shipping-alert").hide(),$("#checkout-content #checkout-shipping-alert2").hide(),$("#checkout-content #checkout-license-alert").html(""),$('#checkout-summary input[name="license_error"]').each(function(){$("#checkout-content #checkout-license-alert").append($(this).val()+"<br/>")}),$("#checkout-content #checkout-license-alert").show()):
0>=$('#checkout-summary input[name="order_shipping_rate"]').length?($("#checkout-content #checkout-button-wrapper").hide(),$("#checkout-content #checkout-license-alert").hide(),$("#paypal-button").hide(),$("#checkout-content #checkout-shipping-alert").show(),$("#checkout-content #checkout-shipping-alert2").show()):($("#checkout-content #checkout-license-alert").hide(),$("#checkout-content #checkout-shipping-alert").hide(),$("#checkout-content #checkout-shipping-alert2").hide(),$("#paypal-button").hide(),
$("#checkout-content #savedCardsWrapper").hide(),$("#checkout-content #cc-form").hide(),$("#checkout-content #checkout-button-wrapper").show()):0<$('#checkout-summary input[name="license_error"]').length?($("#checkout-content #checkout-button-wrapper").hide(),$("#paypal-button").hide(),$("#checkout-content #checkout-shipping-alert").hide(),$("#checkout-content #checkout-shipping-alert2").hide(),$("#checkout-content #checkout-license-alert").html(""),$('#checkout-summary input[name="license_error"]').each(function(){$("#checkout-content #checkout-license-alert").append($(this).val()+
"<br/>")}),$("#checkout-content #checkout-license-alert").show()):0>=$('#checkout-summary input[name="order_shipping_rate"]').length?($("#checkout-content #checkout-button-wrapper").hide(),$("#checkout-content #checkout-license-alert").hide(),$("#paypal-button").hide(),$("#checkout-content #checkout-shipping-alert").show(),$("#checkout-content #checkout-shipping-alert2").show()):("paypal"==$("#cc-form input.form-check-input[type=radio]:checked").val()?($("#checkout-content #cc-form").show(),$("#checkout-content #checkout-button-wrapper").hide(),
$("#paypal-button").show()):("applepay"==$("#cc-form input.form-check-input[type=radio]:checked").val()?($("#checkout-content #cc-form").show(),$("#paypal-button").hide()):"googlepay"==$("#cc-form input.form-check-input[type=radio]:checked").val()?($("#checkout-content #cc-form").show(),$("#paypal-button").hide()):($("#checkout-content #savedCardsWrapper").show(),$("#checkout-content #cc-form").show(),0<$("#checkout-form input.credit-card-selector:checked").length?($("#order-datapaymentprofile").val($(this).val()),
$("#checkout-form input.credit-card-selector:checked").parents(".credit-card.media:first").siblings(".credit-card.media").hide(),$("#checkout-form .field-cc-cvv input").attr("disabled","disabled"),$("#checkout-form input.credit-card-selector:checked").parents(".credit-card.media:first").find(".field-cc-cvv").show(),$("#checkout-form input.credit-card-selector:checked").parents(".credit-card.media:first").find(".field-cc-cvv input").removeAttr("disabled"),$("#cc-form").hide(),$("form#cc-form").prop("data-validated",
!0),$("#order-shipping_same_as_billing").prop("checked",!0),$("#order-shipping_same_as_billing").prop("aria-expanded",!1),$("#billingAddressInputs").removeClass("show"),$("#checkout-form .field-order-shipping_same_as_billing").hide()):($("#order-datapaymentprofile").val(""),$("#savedCardsWrapper .credit-card").show(),$("#checkout-content #cc-form").show(),$("form#cc-form").prop("data-validated",!1),$("#checkout-form .field-order-shipping_same_as_billing").show(),$("#checkout-form .field-cc-cvv").hide(),
$("#checkout-form .field-cc-cvv input").attr("disabled","disabled"))),$("#checkout-content #checkout-button-wrapper").show()),$("#checkout-content #checkout-license-alert").hide(),$("#checkout-content #checkout-shipping-alert").hide(),$("#checkout-content #checkout-shipping-alert2").hide());return!0});$("body").on("click","#cartPage .item-remove",function(){$.ajax({url:$(this).attr("href"),dataType:"json",cache:!1,success:function(b,a,k){"undefined"!=typeof b.status&&"success"==b.status?$.pjax.reload("#cartPage",
{fragment:"#cartPage",timeout:3E4}):alert("There was an error removing an item from your order")},error:function(b,a,k){alert("There was an error removing an item from your order")}});return!1});$("body").on("click","#cartPage .discount-remove",function(){$.ajax({url:$(this).attr("href"),dataType:"json",cache:!1,success:function(b,a,k){"undefined"!=typeof b.status&&"success"==b.status?$.pjax.reload("#cartPage",{fragment:"#cartPage",timeout:3E4}):alert("There was an error removing a discount from your order")},
error:function(b,a,k){alert("There was an error removing a discount from your order")}});return!1});$("body").on("beforeSubmit","#account-form",function(b){var a=$(this);!0===a.data("submitted")?(b.preventDefault(),console.log("Prevented")):(a.data("submitted",!0),$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serializeArray()}).done(function(b){if(b.success)$("#accountModal").modal("hide").on("hidden.bs.modal",function(){$("#accountModal").modal("dispose");$.pjax.reload("#account-data",
{timeout:3E4})});else b.validation?a.yiiActiveForm("updateMessages",b.validation,!0):a.yiiActiveForm("updateMessages",{"user-email":["There was an error updating your account"]},!0);a.data("submitted",!1)}).fail(function(){a.yiiActiveForm("updateMessages",{"user-email":["There was an error updating your account"]},!0);a.data("submitted",!1)}));return!1});$("body").on("beforeSubmit","#notification-form",function(b){var a=$(this);!0===a.data("submitted")?(b.preventDefault(),console.log("Prevented")):
(a.data("submitted",!0),$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serializeArray()}).done(function(b){if(b.success)$("#notificationModal").modal("hide").on("hidden.bs.modal",function(){$("#notificationModal").modal("dispose");$.pjax.reload("#account-data",{timeout:3E4})});else b.validation?a.yiiActiveForm("updateMessages",b.validation,!0):a.yiiActiveForm("updateMessages",{"user-email":["There was an error updating your account"]},!0);a.data("submitted",!1)}).fail(function(){a.yiiActiveForm("updateMessages",
{"user-email":["There was an error updating your account"]},!0);a.data("submitted",!1)}));return!1});$("body").on("beforeSubmit","form.customer-address-form",function(b){var a=$(this);!0===a.data("submitted")?(b.preventDefault(),console.log("Prevented")):(a.data("submitted",!0),$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serializeArray()}).done(function(b){if(b.success)$("#"+a.parents(".modal:first").attr("id")).modal("hide").on("hidden.bs.modal",function(){$("#"+a.parents(".modal:first").attr("id")).modal("dispose");
$.pjax.reload("#account-data",{timeout:3E4})});else b.validation?a.yiiActiveForm("updateMessages",b.validation,!0):a.yiiActiveForm("updateMessages",{"customeraddress-shipping_address_city":["There was an error updating your address"]},!0);a.data("submitted",!1)}).fail(function(){a.yiiActiveForm("updateMessages",{"customeraddress-shipping_address_city":["There was an error updating your address"]},!0);a.data("submitted",!1)}));return!1});$("body").on("click",".customer-address-delete",function(){confirm($(this).data("confirm"))&&
$.ajax({type:"GET",url:$(this).attr("href")}).done(function(b){b.success?$.pjax.reload("#account-data",{timeout:3E4}):alert("There was en error deleting your address")}).fail(function(){alert("There was en error deleting your address")});return!1});$("body").on("click",".customer-card-delete",function(){confirm($(this).data("confirm"))&&$.ajax({type:"GET",url:$(this).attr("href")}).done(function(b){b.success?$.pjax.reload("#account-data",{timeout:3E4}):alert("There was en error deleting your card")}).fail(function(){alert("There was en error deleting your card")});
return!1});$("body").on("beforeSubmit","form#form-add-coupon",function(b){var a=$(this);!0===a.data("submitted")?(b.preventDefault(),console.log("Prevented")):(a.data("submitted",!0),$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serializeArray()}).done(function(b){window.location.href="/cart";a.data("submitted",!1)}).fail(function(){window.location.href="/cart";a.data("submitted",!1)}));return!1});$("body").on("beforeSubmit","form#form-coupon",function(b){var a=$(this);!0===a.data("submitted")?
(b.preventDefault(),console.log("Prevented")):(a.data("submitted",!0),$.ajax({cache:!1,type:a.attr("method"),url:a.attr("action"),data:a.serializeArray()}).done(function(b){$.pjax.reload("#cart-drawer",{fragment:"#cart-drawer",timeout:3E4});a.data("submitted",!1)}).fail(function(){$.pjax.reload("#cart-drawer",{fragment:"#cart-drawer",timeout:3E4});a.data("submitted",!1)}));return!1});$("body").on("beforeSubmit","form#form-coupon-checkout",function(b){var a=$(this),k=$("form#cc-form").prop("data-validated")||
!1,m=$("form#checkout-form #checkout-submit-trigger").val()||0;$("form#checkout-form #order-email").length&&$("#coupon-form-email").length&&$("#coupon-form-email").val($("form#checkout-form #order-email").val());$("form#cc-form").prop("data-validated",!1);$("form#checkout-form #checkout-submit-trigger").val(0);!0===a.data("submitted")?(b.preventDefault(),console.log("Prevented")):(a.data("submitted",!0),$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serializeArray(),beforeSend:function(){$("#checkout-summary").find(".page-progress:first").fadeTo(200,
1)}}).done(function(b){$("form#cc-form").prop("data-validated",k);$("form#checkout-form #checkout-submit-trigger").val(m);b.status.length&&"success"==b.status?$("#checkout-content #checkout-alert-container").html('<div id="w0-message" class="alert-'+b.status+' alert fade show alert-dismissible">\n<button type="button" class="close" data-dismiss="alert" aria-hidden="true">\u00d7</button>\n'+b.content+"</div>"):$("#checkout-content #checkout-alert-container").html("");var l=jQuery.Event("submit");l.target=
$("#checkout-form")[0];l.currentTarget=$("#checkout-form")[0];setTimeout(function(){a.data("submitted",!1);$.pjax.submit(l,"#checkout-summary",{push:!1,replace:!1,scrollTo:!1,timeout:3E4})},100)}).fail(function(){$("form#cc-form").prop("data-validated",k);$("form#checkout-form #checkout-submit-trigger").val(m);$("#checkout-content #checkout-alert-container").html("");var b=jQuery.Event("submit");b.target=$("#checkout-form")[0];b.currentTarget=$("#checkout-form")[0];setTimeout(function(){a.data("submitted",
!1);$.pjax.submit(b,"#checkout-summary",{push:!1,replace:!1,scrollTo:!1,timeout:3E4})},100)}));return!1});$(document).on("pjax:end",function(b,a){"cart-drawer"==$(b.target).attr("id")&&(jQuery("#form-coupon").yiiActiveForm([{id:"couponform-coupon",name:"coupon",container:".field-dynamicmodel-coupon-add",input:"#dynamicmodel-coupon-add",error:".text-danger",validate:function(a,b,l,n,t){b=yii.validation.trim(t,a,[]);yii.validation.required(b,l,{message:"Coupon cannot be blank."})}}],[]),$("#cartOpen").trigger("click"));
"checkout-summary"==$(b.target).attr("id")&&(jQuery("#form-coupon-checkout").yiiActiveForm([{id:"couponform-coupon",name:"coupon",container:".field-couponform-coupon",input:"#couponform-coupon",error:".text-danger",validate:function(a,b,l,n,t){b=yii.validation.trim(t,a,[]);yii.validation.required(b,l,{message:"Coupon cannot be blank."})}}],[]),0<$('#checkout-summary input[name="license_error"]').length?($("#checkout-content #checkout-button-wrapper").hide(),$("#paypal-button").hide(),$("#checkout-content #checkout-shipping-alert").hide(),
$("#checkout-content #checkout-shipping-alert2").hide(),$("#checkout-content #checkout-license-alert").html(""),$('#checkout-summary input[name="license_error"]').each(function(){$("#checkout-content #checkout-license-alert").append($(this).val()+"<br/>")}),$("#checkout-content #checkout-license-alert").show()):0>=$('#checkout-summary input[name="order_shipping_rate"]').length?($("#checkout-content #checkout-button-wrapper").hide(),$("#checkout-content #checkout-license-alert").hide(),$("#paypal-button").hide(),
$("#checkout-content #checkout-shipping-alert").show(),$("#checkout-content #checkout-shipping-alert2").show()):("paypal"==$("#cc-form input.form-check-input[type=radio]:checked").val()?$("#paypal-button").show():"applepay"==$("#cc-form input.form-check-input[type=radio]:checked").val()?($("#checkout-form").data("submitted",!1),$("form#cc-form").prop("data-validated",!1)):"googlepay"==$("#cc-form input.form-check-input[type=radio]:checked").val()?($("#checkout-form").data("submitted",!1),$("form#cc-form").prop("data-validated",
!1)):$("#checkout-content #checkout-button-wrapper").show(),$("#checkout-content #checkout-license-alert").hide(),$("#checkout-content #checkout-shipping-alert").hide(),$("#checkout-content #checkout-shipping-alert2").hide()));0<$('#checkout-summary input[name="order_shipping_rate"]:checked').length&&$('#checkout-summary input[name="order_shipping_rate"]:checked').trigger("click")});$(document).on("pjax:error",function(b,a,k,m,l){if("checkout-summary"==$(b.target).attr("id")&&"undefined"!=typeof m&&
"abort"!=m)return b.preventDefault(),$(".checkout-button-wrapper").hide(),alert("There was an error sending a request. Please refresh the page and try again"),!1})});$("body").on("submit","form",function(b){var a=$(this);!0===a.data("submitted")?(console.log("Submission Prevented"),b.preventDefault()):(a.data("submitted",!0),console.log("Submission Started"),"checkout-form"==$(this).attr("id")&&$(".overlayFull").toggleClass("active"))});
$("body").on("change","#dynamicmodel-checkout_save_card",function(b){1==$(this).prop("checked")?$("#order-checkout_save_card").val(1):$("#order-checkout_save_card").val(0)});
$("body").on("change","#checkout-form input.credit-card-selector",function(b){1==$(this).prop("checked")?($("#order-datapaymentprofile").val($(this).val()),$(this).parents(".credit-card.media:first").siblings(".credit-card.media").hide(),$("#checkout-form .field-cc-cvv input").attr("disabled","disabled"),$(this).parents(".credit-card.media:first").find(".field-cc-cvv").show(),$(this).parents(".credit-card.media:first").find(".field-cc-cvv input").removeAttr("disabled"),$("#cc-form").hide(),$("form#cc-form").prop("data-validated",
!0),$("#order-shipping_same_as_billing").prop("checked",!0),$("#order-shipping_same_as_billing").prop("aria-expanded",!1),$("#billingAddressInputs").removeClass("show"),$("#checkout-form .field-order-shipping_same_as_billing").hide()):($("#order-datapaymentprofile").val(""),$("#savedCardsWrapper .credit-card").show(),$("#checkout-content #cc-form").show(),$("form#cc-form").prop("data-validated",!1),$("#checkout-form .field-order-shipping_same_as_billing").show(),$("#checkout-form .field-cc-cvv").hide(),
$("#checkout-form .field-cc-cvv input").attr("disabled","disabled"))});
$("body").on("change","#cc-form input.form-check-input[type=radio]",function(b){$(this).is(":checked")&&("paypal"==$(this).val()?($("#cc-form .cc-form-details").hide(),$("form#cc-form").prop("data-validated",!0),$("#order-datapaymentprofile").val(""),$("#savedCardsWrapper").hide(),$("#checkout-form .field-cc-cvv").hide(),$("#checkout-form .field-cc-cvv input").attr("disabled","disabled"),$("#checkout-content #checkout-button-wrapper").hide(),$("#checkout-shipping-alert").is(":visible")||$("#checkout-license-alert").is(":visible")||
$("#paypal-button").show()):("applepay"==$(this).val()?($("#cc-form .cc-form-details").hide(),$("form#cc-form").prop("data-validated",!1),$("#order-datapaymentprofile").val(""),$("#savedCardsWrapper").hide(),$("#checkout-form .field-cc-cvv").hide(),$("#checkout-form .field-cc-cvv input").attr("disabled","disabled"),$("#paypal-button").hide()):"googlepay"==$(this).val()?($("#cc-form .cc-form-details").hide(),$("form#cc-form").prop("data-validated",!1),$("#order-datapaymentprofile").val(""),$("#savedCardsWrapper").hide(),
$("#checkout-form .field-cc-cvv").hide(),$("#checkout-form .field-cc-cvv input").attr("disabled","disabled"),$("#paypal-button").hide()):($("#cc-form .cc-form-details").show(),$("form#cc-form").prop("data-validated",!1),$("#paypal-button").hide(),$("#savedCardsWrapper").show()),$("#checkout-shipping-alert").is(":visible")||$("#checkout-license-alert").is(":visible")||$("#checkout-content #checkout-button-wrapper").show()))});$("body").on("click","#checkout-content #checkout-button",function(b){$("form#checkout-form").submit()});
$("body").on("click","#checkOut",function(b){var a=$(this);!0===a.data("submitted")?(console.log("Submission Prevented"),b.preventDefault()):(a.data("submitted",!0),console.log("Submission Started"))});
$("body").on("beforeSubmit","form#checkout-form",function(){var b=parseFloat($('#checkout-summary input[name="order_shipping_rate"]:checked').attr("data-price")),a=parseFloat($("#checkout-summary #order-subtotal-amount").attr("data-price")),k=parseFloat($("#checkout-summary #order-discount-amount").attr("data-price"))||0,m=giftcard=parseFloat($("#checkout-summary #order-giftcard-amount").attr("data-balance"))||0,l=parseFloat($("#checkout-summary #order-tax-amount").attr("data-price"))||0;b=b+a+l-
k;0<m&&(giftcard=Math.min(b,m),b-=giftcard);if(0>=b)return $("form#checkout-form #checkout-submit-trigger").val(1),!0;if(1==$("form#cc-form").prop("data-validated"))return console.log("Submission trigerred"),$("form#checkout-form #checkout-submit-trigger").val(1),!0;"applepay"==$("#cc-form input.form-check-input[type=radio]:checked").val()?(console.log("Applepay checkup"),$(this).data("submitted",!1),applePayButtonClicked(number_format(b,2,".",""))):"googlepay"==$("#cc-form input.form-check-input[type=radio]:checked").val()?
(console.log("Googlepay checkup"),$(this).data("submitted",!1),onGooglePaymentButtonClicked(number_format(b,2,".",""))):(console.log("Submission CC invoked"),$(this).data("submitted",!1),$("form#cc-form").submit());return!1});
function createAppleTransaction(b){console.log("starting createTransaction");b=JSON.stringify(b);b=window.btoa(b);$("#order-datadescriptor").val("COMMON.APPLE.INAPP.PAYMENT");$("#order-datavalue").val(b);$("#order-datatype").val("applepay");$("form#cc-form").prop("data-validated",!0);$("form#checkout-form").submit();return!0}
function applePayButtonClicked(b){function a(a){return new Promise(function(b,k){var l=new XMLHttpRequest;l.onload=function(){var a=JSON.parse(this.responseText);b(a)};l.onerror=k;l.open("GET","/site/applepay?validation_url="+a);l.send()})}function k(a){return new Promise(function(b,k){console.log("starting function sendPaymentToken()");returnFromGateway=createAppleTransaction(a.paymentData);console.log("defaulting to successful payment by the Token");1==returnFromGateway?b(!0):k})}console.log("Apple Pay Initiated");
var m={countryCode:"US",currencyCode:"USD",supportedNetworks:["visa","masterCard","amex","discover"],merchantCapabilities:["supports3DS","supportsCredit","supportsDebit"],total:{label:$("#checkout-button").attr("data-name"),amount:b}},l=new ApplePaySession(1,m);l.onvalidatemerchant=function(b){a(b.validationURL).then(function(a){l.completeMerchantValidation(a)})};l.onpaymentmethodselected=function(a){console.log("starting onpaymentmethodselected");l.completePaymentMethodSelection({type:"final",label:"TeeTurtle",
amount:b},[])};l.onpaymentauthorized=function(a){console.log("starting session.onpaymentauthorized");k(a.payment.token).then(function(a){a?(a=ApplePaySession.STATUS_SUCCESS,console.log("Apple Pay Payment SUCCESS ")):a=ApplePaySession.STATUS_FAILURE;l.completePayment(a)})};l.oncancel=function(a){$("form#cc-form").prop("data-validated",!1);$("form#checkout-form #checkout-submit-trigger").val(0);$("#order-datadescriptor").val("");$("#order-datavalue").val("");$("#order-datatype").val("")};l.begin()}
var baseRequest={apiVersion:2,apiVersionMinor:0},allowedCardNetworks=["AMEX","DISCOVER","MASTERCARD","VISA"],allowedCardAuthMethods=["PAN_ONLY","CRYPTOGRAM_3DS"],tokenizationSpecification={type:"PAYMENT_GATEWAY",parameters:{gateway:"authorizenet",gatewayMerchantId:$("#checkout-button").attr("data-google-merchant-id")}},baseCardPaymentMethod={type:"CARD",parameters:{allowedAuthMethods:allowedCardAuthMethods,allowedCardNetworks:allowedCardNetworks}},cardPaymentMethod=Object.assign({},baseCardPaymentMethod,
{tokenizationSpecification:tokenizationSpecification}),paymentsClient=null;function getGoogleIsReadyToPayRequest(){console.log("getGoogleIsReadyToPayRequest");return Object.assign({},baseRequest,{allowedPaymentMethods:[baseCardPaymentMethod]})}
function getGooglePaymentDataRequest(b){console.log("getGooglePaymentDataRequest");var a=Object.assign({},baseRequest);a.allowedPaymentMethods=[cardPaymentMethod];a.transactionInfo={countryCode:"US",currencyCode:"USD",totalPriceStatus:"FINAL",totalPrice:b};a.merchantInfo={merchantName:$("#checkout-button").attr("data-google-merchant-name"),merchantId:$("#checkout-button").attr("data-google-id")};return a}
function getGooglePaymentsClient(){console.log("getGooglePaymentsClient");null===paymentsClient&&(paymentsClient=new google.payments.api.PaymentsClient({environment:"1"==$("#checkout-button").attr("data-google-status")?"PRODUCTION":"TEST"}));return paymentsClient}function onGooglePayLoaded(){console.log("onGooglePayLoaded");getGooglePaymentsClient().isReadyToPay(getGoogleIsReadyToPayRequest()).then(function(b){b.result&&addGooglePayButton()}).catch(function(b){console.error(b)})}
function addGooglePayButton(){getGooglePaymentsClient();$("#googlepaywrapper").show()}
function onGooglePaymentButtonClicked(b){var a=getGooglePaymentDataRequest(b);a.transactionInfo={countryCode:"US",currencyCode:"USD",totalPriceStatus:"FINAL",totalPrice:b};getGooglePaymentsClient().loadPaymentData(a).then(function(a){console.log("processPayment init");processPayment(a)}).catch(function(a){$("form#cc-form").prop("data-validated",!1);$("form#checkout-form #checkout-submit-trigger").val(0);$("#order-datadescriptor").val("");$("#order-datavalue").val("");$("#order-datatype").val("");
console.error(a)})}function processPayment(b){console.log("processPayment done");paymentToken=b.paymentMethodData.tokenizationData.token;b=window.btoa(paymentToken);$("#order-datadescriptor").val("COMMON.GOOGLE.INAPP.PAYMENT");$("#order-datavalue").val(b);$("#order-datatype").val("googlepay");$("form#cc-form").prop("data-validated",!0);$("form#checkout-form").submit()}
$("body").on("beforeSubmit","form#cc-form",function(){if(1!=$(this).prop("data-validated")){var b={};b.clientKey=$("#checkout-button").attr("data-key");b.apiLoginID=$("#checkout-button").attr("data-login");var a={};a.cardNumber=$("#dynamicmodel-checkout_cc_number").val().replace(/-/g,"");a.month=$("#dynamicmodel-checkout_cc_month").val();a.year=$("#dynamicmodel-checkout_cc_year").val();a.cardCode=$("#dynamicmodel-checkout_cc_code").val();a.fullName=$("#dynamicmodel-checkout_cc_name").val();var k=
{};k.authData=b;k.cardData=a;Accept.dispatchData(k,responseHandler)}return!1});
function responseHandler(b){if("Error"===b.messages.resultCode){for(var a=0,k="";a<b.messages.message.length;)k=k+b.messages.message[a].text+"<br/>",a+=1;k.length?$("#checkout-content #payment-error-wrapper").html('<div id="w0-payment-message" class="alert-danger alert fade show alert-dismissible">\n<button type="button" class="close" data-dismiss="alert" aria-hidden="true">\u00d7</button>\n'+k+"</div>"):$("#checkout-content #payment-error-wrapper").html("");$("form#cc-form").prop("data-validated",
!1);$("form#checkout-form #checkout-submit-trigger").val(0);$("#order-datadescriptor").val("");$("#order-datavalue").val("");$("#order-datatype").val("")}else $("#checkout-content #payment-error-wrapper").html(""),$("form#cc-form").prop("data-validated",!0),paymentFormUpdate(b.opaqueData)}function paymentFormUpdate(b){$("#order-datadescriptor").val(b.dataDescriptor);$("#order-datavalue").val(b.dataValue);$("#order-datatype").val("creditcard");$("form#checkout-form").submit()}var states_dropdown={};
$("body").on("change",".country-dynamic-dropdown",function(b){if(!(0>$(this).prop("selectedIndex"))&&(b=$(this).parents(".country-dynamic-wrapper:first").find(".province-dynamic-dropdown"),b.length)){b.html("");var a=!1,k;for(k in states_dropdown[$(this).val()]){a=!0;break}if(a)for(k in b.append("<option>-- Please Select --</option>"),states_dropdown[$(this).val()])b.append('<option value="'+k+'">'+states_dropdown[$(this).val()][k]+"</option>");else b.append('<option value="-">-</option>')}});
var filters=[];
$("body").on("click",".dropdown-menu .product-options label",function(b){var a=$(b.currentTarget).attr("for"),k=$("#"+a),m;-1<(m=filters.indexOf(a))?(filters.splice(m,1),setTimeout(function(){k.prop("checked",!1);$("."+a).removeClass("show")},0)):(filters.push(a),setTimeout(function(){k.prop("checked",!0);$("."+a).addClass("show")},0));$(b.target).blur();0<filters.length?$(".selected-filters").addClass("show"):$(".selected-filters").removeClass("show");setTimeout(function(){$("#filterform").trigger("submit")},50);
return!1});$("body").on("click",".dropdown-menu .product-options button.done",function(b){b.preventDefault();$("#sizeFilter").dropdown("toggle");$("#filterform").trigger("submit")});
$("body").on("click",".dropdown-menu .product-options button.clear",function(b){b.preventDefault();b.stopPropagation();for(b=0;b<filters.length;b++){var a=filters[b];$("#"+a).prop("checked",!1);$("."+a).removeClass("show")}$(".selected-filters").removeClass("show");filters=[];setTimeout(function(){$("#filterform").trigger("submit")},50)});
$("body").on("click",".remove-filter",function(b){var a=$(this).parents(".btn-group").attr("for");-1<(b=filters.indexOf(a))&&(filters.splice(b,1),setTimeout(function(){$("#"+a).prop("checked",!1);$("."+a).removeClass("show")},0));1>filters.length&&$(".selected-filters").removeClass("show");setTimeout(function(){$("#filterform").trigger("submit")},50)});
$("#quickAddModal").on("show.bs.modal",function(b){b=$(b.relatedTarget).data("url");var a=$(this);a.find(".modal-body .container-wrapper").html('<div class="page-progress" style="display:block"><div class="progress-circle-indeterminate progress-circle-success" style=""></div></div>');$.ajax({url:b,cache:!1,success:function(b,m,l){"undefined"!=typeof b.status&&"error"!=b.status?a.find(".modal-body .container-wrapper").html("").append(b.content):a.find(".modal-body .container-wrapper").html('<div class="container modal-error-text">There was an error processing your request.<br/> Please refresh the page and try again</div>')},
error:function(b,m,l){a.find(".modal-body .container-wrapper").html('<div class="container modal-error-text">There was an error processing your request.<br/> Please refresh the page and try again</div>')}})});$("#quickAddModal").on("hidden.bs.modal",function(b){$(this).find(".modal-body .container-wrapper").html('<div class="page-progress" style="display:block"><div class="progress-circle-indeterminate progress-circle-success" style=""></div></div>')});
$("body").on("submit","#return-form",function(){var b=checkReturnItems();0==b?$(this).data("submitted",!1):$(".overlayFull").toggleClass("active");return b});
function checkReturnItems(){var b=!0;if(0>=$("#return-form .return-line-item input[type=radio]:checked").length)return!1;$("#return-form .return-line-item input[type=radio]:checked").each(function(){"refund"==$(this).val()?($(this).parents("li:first").find("select.refund-reason").removeClass("d-none"),$(this).parents("li:first").find("select.return-reason").addClass("d-none"),$(this).parents("li:first").find("select.replacement").addClass("d-none"),""==$(this).parents("li:first").find("select.refund-reason").val()&&
($(this).parents("li:first").find(".error").removeClass("d-none"),b=!1)):"return"==$(this).val()&&($(this).parents("li:first").find("select.return-reason").removeClass("d-none"),$(this).parents("li:first").find("select.refund-reason").addClass("d-none"),""==$(this).parents("li:first").find("select.return-reason").val()&&($(this).parents("li:first").find(".error").removeClass("d-none"),b=!1),"Product was damaged"==$(this).parents("li:first").find("select.return-reason").val()&&$(this).parents("li:first").find(".damaged-msg").removeClass("d-none"),
"Fit wasn't right"==$(this).parents("li:first").find("select.return-reason").val()?($(this).parents("li:first").find("select.replacement").removeClass("d-none"),""==$(this).parents("li:first").find("select.replacement").val()&&($(this).parents("li:first").find(".error").removeClass("d-none"),b=!1)):$(this).parents("li:first").find("select.replacement").addClass("d-none"))});checkReturnRefundValue();return b}
$("body").on("change","#return-form select.return-reason",function(){""==$(this).val()?$(this).parents("li:first").find(".error").removeClass("d-none"):$(this).parents("li:first").find(".error").addClass("d-none");"Product was damaged"==$(this).val()?$(this).parents("li:first").find(".damaged-msg").removeClass("d-none"):$(this).parents("li:first").find(".damaged-msg").addClass("d-none");"Fit wasn't right"==$(this).val()?$(this).parents("li:first").find("select.replacement").removeClass("d-none"):
$(this).parents("li:first").find("select.replacement").addClass("d-none")});$("body").on("change","#return-form select.refund-reason",function(){""==$(this).val()?$(this).parents("li:first").find(".error").removeClass("d-none"):$(this).parents("li:first").find(".error").addClass("d-none")});$("body").on("change","#return-form select.replacement",function(){""==$(this).val()?$(this).parents("li:first").find(".error").removeClass("d-none"):$(this).parents("li:first").find(".error").addClass("d-none")});
$("body").on("change","#return-form .return-line-item input[type=radio]",function(){$(this).parents("li:first").find(".damaged-msg").addClass("d-none");$(this).parents("li:first").find(".error").addClass("d-none");"refund"==$(this).val()?($(this).parents("li:first").find("select.refund-reason").removeClass("d-none"),$(this).parents("li:first").find("select.return-reason").addClass("d-none"),$(this).parents("li:first").find("select.replacement").addClass("d-none")):"return"==$(this).val()&&($(this).parents("li:first").find("select.return-reason").removeClass("d-none"),
$(this).parents("li:first").find("select.refund-reason").addClass("d-none"),"Product was damaged"==$(this).parents("li:first").find("select.return-reason").val()&&$(this).parents("li:first").find(".damaged-msg").removeClass("d-none"),"Fit wasn't right"==$(this).parents("li:first").find("select.return-reason").val()?$(this).parents("li:first").find("select.replacement").removeClass("d-none"):$(this).parents("li:first").find("select.replacement").addClass("d-none"));checkReturnRefundValue()});
$("body").on("change","#return-form input[type=checkbox]",function(){0==$(this).prop("checked")&&($(this).parents("li:first").find("select").addClass("d-none"),$(this).parents("li:first").find("input[type=radio]").prop("checked",!1));$(this).parents("li:first").find(".damaged-msg").addClass("d-none");$(this).parents("li:first").find(".error").addClass("d-none");checkReturnRefundValue()});$("body").on("show.bs.collapse","#pastActivity",function(){$("button.show-history").html("Hide Past Activity")});
$("body").on("hidden.bs.collapse","#pastActivity",function(){$("button.show-history").html("Show Past Activity")});
function checkReturnRefundValue(){var b=0;$("#return-form input[type=checkbox]:checked").each(function(){"refund"==$(this).parents("li:first").find("input[type=radio]:checked").val()&&(b=b+parseFloat($(this).parents("li:first").find("input.return-item-price[type=hidden]").val())+parseFloat($(this).parents("li:first").find("input.return-item-tax[type=hidden]").val()))});if(0<b){var a=parseFloat($("#order_total").val());0<$("#return-form").find("li").length&&0<$("#return-form").find("input.refund[type=radio]:checked").length&&
$("#return-form").find("li").length==$("#return-form").find("input.refund[type=radio]:checked").length?(b=a,$("#return-form .total-refund h5").html('Full Refund: <span class="value">$'+number_format(b,2,".","")+"</span>")):(b>a&&(b=a),$("#return-form .total-refund h5").html('Amount to be refunded: <span class="value">$'+number_format(b,2,".","")+"</span>"));$("#return-form .total-refund").removeClass("d-none")}else $("#return-form .total-refund").addClass("d-none")}
function number_format(b,a,k,m){b=(b+"").replace(/[^0-9+\-Ee.]/g,"");b=isFinite(+b)?+b:0;a=isFinite(+a)?Math.abs(a):0;m="undefined"===typeof m?",":m;k="undefined"===typeof k?".":k;var l="";l=function(a,b){var k=Math.pow(10,b);return""+(Math.round(a*k)/k).toFixed(b)};l=(a?l(b,a):""+Math.round(b)).split(".");3<l[0].length&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,m));(l[1]||"").length<a&&(l[1]=l[1]||"",l[1]+=Array(a-l[1].length+1).join("0"));return l.join(k)}
$.fn.serializeFormJson=function(){var b={};$(this).find('input[type="hidden"]:enabled, input[type="text"]:enabled, input[type="password"]:enabled, input[type="checkbox"]:checked:enabled, input[type="radio"]:checked:enabled, select:enabled').each(function(){if("hidden"==$(this).attr("type")){var a=$(this).parent().find('input[type="checkbox"][name="'+this.name.replace(/\[/g,"[").replace(/\]/g,"]")+'"]');if(null!=a&&a.prop("checked"))return}null!==this.name&&void 0!==this.name&&""!==this.name&&(a=$(this).is("select")?
$(this).find("option:selected").val():this.value,void 0!==b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(a||"")):b[this.name]=a||"")});return b};$.pjax.defaults.timeout=0;
function makeCountdownTimer(b,a){b=new Date(b);b=Date.parse(b)/1E3;var k=new Date;k=Date.parse(k)/1E3;b-=k;if(0<=b){a=Math.floor(b/86400);k=Math.floor((b-86400*a)/3600);var m=Math.floor((b-86400*a-3600*k)/60);b=Math.floor(b-86400*a-3600*k-60*m);"10">k&&(k="0"+k);"10">m&&(m="0"+m);"10">b&&(b="0"+b);$("#days").html(a+"<span>Days</span>");$("#hours").html(k+"<span>Hours</span>");$("#minutes").html(m+"<span>Minutes</span>");$("#seconds").html(b+"<span>Seconds</span>")}else $(".cd-inner").html(a)}
var componentForm={street_number:"short_name",route:"long_name",locality:"long_name",administrative_area_level_1:"short_name",administrative_area_level_3:"long_name",country:"short_name",postal_code:"short_name"},autocompleteService,placesService,predictionsOld,sessionToken;
function initAutocomplete(){var b=new google.maps.places.AutocompleteSessionToken,a=new google.maps.places.AutocompleteService,k=new google.maps.places.PlacesService($("<div />")[0]),m;$("#order-shipping_address_line1").typeahead({highlight:!0},{source:function(k,n,t){var l=[];l.push("");a.getPlacePredictions({input:k,sessionToken:b,types:["geocode"],componentRestrictions:{country:$("#checkout-form").find('select[data-address="country"]').val().toLowerCase()}},function(a,b){b==google.maps.places.PlacesServiceStatus.OK&&
(m=a,$.map(a,function(a){l.push(a.description)}),t(l))})},name:"States",async:!0,hint:!0,minLength:3,limit:15,templates:{empty:'<div class="empty-message">\nNo Match Found\n</div>'}});$("#order-shipping_address_line1").on("typeahead:beforeselect",function(a,b){}).on("typeahead:selected",function(a,n){a=$.grep(m,function(a){return a.description===n})[0].place_id;k.getDetails({placeId:a,fields:["address_components","adr_address","formatted_address"],sessionToken:b},function(a,b){if(b==google.maps.places.PlacesServiceStatus.OK&&
"undefined"!=typeof a.address_components&&"undefined"!=typeof a.address_components.length&&0<a.address_components.length){for(var k="",l="",q=b="",h="",e=!1,c=0;c<a.address_components.length;c++)if(null!=a.address_components[c].types[0]&&"undefined"!=typeof a.address_components[c].types[0]){var g=a.address_components[c].types[0];if("undefined"!=typeof componentForm[g]&&"undefined"!=typeof a.address_components[c][componentForm[g]]&&a.address_components[c][componentForm[g]].length){var d=a.address_components[c][componentForm[g]];
"street_number"==g&&(e=!0,k=d.trim());"route"==g&&(k=k+" "+d.trim());"locality"==g&&(h=d.trim());"administrative_area_level_3"==g&&0==h.length&&(h=d.trim());"administrative_area_level_1"==g&&(l=d.trim());"country"==g&&(b=d.trim());"postal_code"==g&&(q=d.trim())}}0==e&&(a=n.match(/^\d+/g),null!=a[0]&&"undefined"!=typeof a[0]&&0<a[0].length&&(k=a[0].trim()+k));$("#checkout-form").find('input[data-address="street"]').typeahead("val",k).typeahead("close");"undefined"!=typeof k&&$("#checkout-form").find('input[data-address="street"]').val(k);
"undefined"!=typeof h&&$("#checkout-form").find('input[data-address="city"]').val(h);"undefined"!=typeof q&&$("#checkout-form").find('input[data-address="zip"]').val(q);a=50;"undefined"!=typeof b&&0<b.length&&($("#checkout-form").find('select[data-address="country"]').val(b),a=200);"undefined"!=typeof l&&0<l.length&&setTimeout(function(){$("#checkout-form").find('select[data-address="state"]').val(l);$("#order-shipping_address_state").trigger("change")},a)}})})}
$("#verify-email-prompt").on("beforeSubmit",function(b){var a=$(this);!0===a.data("submitted")?(b.preventDefault(),console.log("Prevented")):(a.data("submitted",!0),$.ajax({type:a.attr("method"),url:a.attr("action"),data:a.serializeArray()}).done(function(b){b.success&&b.promocode?($("#promo-code").html(b.promocode),$("#promoBarCode").html(b.promocode),$("#modal-text-1, #modal-text-2").toggleClass("d-none")):b.validation?a.yiiActiveForm("updateMessages",b.validation,!0):a.yiiActiveForm("updateMessages",
{"verifyemailform-email":["There was an error checking your Email"]},!0);a.data("submitted",!1)}).fail(function(){a.yiiActiveForm("updateMessages",{"verifyemailform-email":["There was an error checking your Email"]},!0);a.data("submitted",!1)}));return!1});$("#emailCapture").on("hide.bs.modal",function(){$("#modal-text-2").hasClass("d-none")||($("#promo-bar").removeClass("d-none"),$("#top-bar .navbar.fixed-top, #sidebar").addClass("promo-active"));document.cookie="_cpnPop_=true; expires=1 Jan 2050 00:00:00 UTC; path=/"});
$(window).on("resize",function(){if(!$("#promo-bar").hasClass("d-none")){var b=$("#promo-bar").height();$("#top-bar .navbar.fixed-top, #sidebar").css("top",b)}});$("#promo-bar .promo-code").on("click",function(){var b=$(this),a=b.text().trim(),k=$("<input>");$("body").append(k);k.val(a).select();document.execCommand("copy");k.remove();b.html("COPIED!");setTimeout(function(){b.html(a)},2E3)});
$("#emailCapture .promo-code").on("click",function(){var b=$(this),a=b.text().trim(),k=$("<input>");$("#emailCapture").append(k);k.val(a).select();document.execCommand("copy");k.remove();b.html("COPIED!");setTimeout(function(){b.html(a)},2E3)});
!function(b,a){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(b){return a(b)}):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(this,function(b){var a=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(a){return"string"==
typeof a},isNumber:function(a){return"number"==typeof a},isArray:b.isArray,isFunction:b.isFunction,isObject:b.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(a){return a instanceof b},toStr:function(b){return a.isUndefined(b)||null===b?"":b+""},bind:b.proxy,each:function(a,e){b.each(a,function(a,b){return e(b,a)})},map:b.map,filter:b.grep,every:function(a,e){var c=!0;return a?(b.each(a,function(b,d){return(c=e.call(null,
d,b,a))?void 0:!1}),!!c):c},some:function(a,e){var c=!1;return a?(b.each(a,function(b,d){return(c=e.call(null,d,b,a))?!1:void 0}),!!c):c},mixin:b.extend,identity:function(a){return a},clone:function(a){return b.extend(!0,{},a)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(a){function e(){return String(a)}return b.isFunction(a)?a:e},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var g,d;return function(){var f,e,h=this,q=arguments;return f=function(){g=
null;c||(d=a.apply(h,q))},e=c&&!g,clearTimeout(g),g=setTimeout(f,b),e&&(d=a.apply(h,q)),d}},throttle:function(a,b){var c,g,d,f,e,h;return e=0,h=function(){e=new Date;d=null;f=a.apply(c,g)},function(){var p=new Date,r=b-(p-e);return c=this,g=arguments,0>=r?(clearTimeout(d),d=null,e=p,f=a.apply(c,g)):d||(d=setTimeout(h,r)),f}},stringify:function(b){return a.isString(b)?b:JSON.stringify(b)},noop:function(){}}}(),k=function(){function b(b){var c={};return a.each(b,function(a,b){c[b]="."+a}),c}function e(){var b=
{wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return a.isMsie()&&a.mixin(b.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),
b}var c={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(g){var d,f;return f=a.mixin({},c,g),d={css:e(),classes:f,html:{wrapper:'<span class="'+f.wrapper+'"></span>',menu:'<div class="'+f.menu+'"></div>'},selectors:b(f)},{css:d.css,html:d.html,classes:d.classes,selectors:d.selectors,mixin:function(b){a.mixin(b,
d)}}}}(),m=function(){function h(a){a&&a.el||b.error("EventBus initialized without el");this.$el=b(a.el)}var e;return e={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},a.mixin(h.prototype,{_trigger:function(a,g){var c;return c=b.Event("typeahead:"+a),(g=g||[]).unshift(c),this.$el.trigger.apply(this.$el,g),c},before:function(a){var b,c;return b=[].slice.call(arguments,1),c=this._trigger("before"+a,b),c.isDefaultPrevented()},trigger:function(a){var b;
this._trigger(a,[].slice.call(arguments,1));(b=e[a])&&this._trigger(b,[].slice.call(arguments,1))}}),h}(),l=function(){function a(a,b,d,e){if(!d)return this;b=b.split(g);d=e?c(d,e):d;for(this._callbacks=this._callbacks||{};e=b.shift();)this._callbacks[e]=this._callbacks[e]||{sync:[],async:[]},this._callbacks[e][a].push(d);return this}function b(a,b,c){return function(){for(var f,d=0,g=a.length;!f&&g>d;d+=1)f=!1===a[d].apply(b,c);return!f}}function c(a,b){return a.bind?a.bind(b):function(){a.apply(b,
[].slice.call(arguments,0))}}var g=/\s+/,d=function(){return window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}();return{onSync:function(b,c,d){return a.call(this,"sync",b,c,d)},onAsync:function(b,c,d){return a.call(this,"async",b,c,d)},off:function(a){var b;if(!this._callbacks)return this;for(a=a.split(g);b=a.shift();)delete this._callbacks[b];return this},trigger:function(a){var c,f,e;if(!this._callbacks)return this;a=a.split(g);for(e=[].slice.call(arguments,
1);(c=a.shift())&&(f=this._callbacks[c]);){var r=b(f.sync,this,[c].concat(e));var h=b(f.async,this,[c].concat(e));r()&&d(h)}return this}}}(),n=function(b){function e(b,c,f){for(var d,g=[],e=0,r=b.length;r>e;e++)g.push(a.escapeRegExChars(b[e]));return d=f?"\\b("+g.join("|")+")\\b":"("+g.join("|")+")",c?new RegExp(d):new RegExp(d,"i")}var c={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(g){function d(a){var c,f,d;return(c=p.exec(a.data))&&(d=b.createElement(g.tagName),
g.className&&(d.className=g.className),f=a.splitText(c.index),f.splitText(c[0].length),d.appendChild(f.cloneNode(!0)),a.parentNode.replaceChild(d,f)),!!c}function f(a,b){for(var c,d=0;d<a.childNodes.length;d++)c=a.childNodes[d],3===c.nodeType?d+=b(c)?1:0:f(c,b)}var p;g=a.mixin({},c,g);g.node&&g.pattern&&(g.pattern=a.isArray(g.pattern)?g.pattern:[g.pattern],p=e(g.pattern,g.caseSensitive,g.wordsOnly),f(g.node,d))}}(window.document),t=function(){function h(c,g){c=c||{};c.input||b.error("input is missing");
g.mixin(this);this.$hint=b(c.hint);this.$input=b(c.input);this.query=this.$input.val();this.queryWhenFocused=this.hasFocus()?this.query:null;c=this.$input;this.$overflowHelper=b('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:c.css("font-family"),fontSize:c.css("font-size"),fontStyle:c.css("font-style"),fontVariant:c.css("font-variant"),fontWeight:c.css("font-weight"),wordSpacing:c.css("word-spacing"),letterSpacing:c.css("letter-spacing"),
textIndent:c.css("text-indent"),textRendering:c.css("text-rendering"),textTransform:c.css("text-transform")}).insertAfter(c);this._checkLanguageDirection();0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=a.noop)}var e;return e={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},h.normalizeQuery=function(b){return a.toStr(b).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},a.mixin(h.prototype,l,{_onBlur:function(){this.resetInputValue();this.trigger("blurred")},
_onFocus:function(){this.queryWhenFocused=this.query;this.trigger("focused")},_onKeydown:function(a){var b=e[a.which||a.keyCode];this._managePreventDefault(b,a);b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._setQuery(this.getInputValue());this.clearHintIfInvalid();this._checkLanguageDirection()},_managePreventDefault:function(a,b){switch(a){case "up":case "down":a=!(b.altKey||b.ctrlKey||b.metaKey||b.shiftKey);break;default:a=!1}a&&b.preventDefault()},_shouldTrigger:function(a,
b){switch(a){case "tab":a=!(b.altKey||b.ctrlKey||b.metaKey||b.shiftKey);break;default:a=!0}return a},_checkLanguageDirection:function(){var a=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==a&&(this.dir=a,this.$hint.attr("dir",a),this.trigger("langDirChanged",a))},_setQuery:function(a,b){var c;var f=this.query;f=(c=h.normalizeQuery(a)===h.normalizeQuery(f))?this.query.length!==a.length:!1;this.query=a;b||c?!b&&f&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",
this.query)},bind:function(){var b,g,d,f,p=this;return b=a.bind(this._onBlur,this),g=a.bind(this._onFocus,this),d=a.bind(this._onKeydown,this),f=a.bind(this._onInput,this),this.$input.on("blur.tt",b).on("focus.tt",g).on("keydown.tt",d),!a.isMsie()||9<a.isMsie()?this.$input.on("input.tt",f):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(b){e[b.which||b.keyCode]||a.defer(a.bind(p._onInput,p,b))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},
getQuery:function(){return this.query||""},setQuery:function(a,b){this.setInputValue(a);this._setQuery(a,b)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(a){this.$input.val(a);this.clearHintIfInvalid();this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},
clearHintIfInvalid:function(){var a=this.getInputValue();var b=this.getHint();b=a!==b&&0===b.indexOf(a);""!==a&&b&&!this.hasOverflow()||this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var a=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var b,g,d;return b=this.$input.val().length,g=this.$input[0].selectionStart,a.isNumber(g)?g===b:document.selection?(d=document.selection.createRange(),
d.moveStart("character",-b),b===d.text.length):!0},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$overflowHelper.remove();this.$hint=this.$input=this.$overflowHelper=b("<div>")}}),h}(),y=function(){function h(f,g){f=f||{};f.templates=f.templates||{};f.templates.notFound=f.templates.notFound||f.templates.empty;f.source||b.error("missing source");f.node||b.error("missing node");f.name&&!/^[_a-zA-Z0-9-]+$/.test(f.name)&&b.error("invalid dataset name: "+f.name);g.mixin(this);this.highlight=
!!f.highlight;this.name=f.name||d();this.limit=f.limit||5;this.displayFn=e(f.display||f.displayKey);this.templates=c(f.templates,this.displayFn);this.source=f.source.__ttAdapter?f.source.__ttAdapter():f.source;this.async=a.isUndefined(f.async)?2<this.source.length:!!f.async;this._resetLastSuggestion();this.$el=b(f.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function e(b){function c(a){return a[b]}return b=b||a.stringify,a.isFunction(b)?b:c}function c(c,d){function f(a){return b("<div>").text(d(a))}
return{notFound:c.notFound&&a.templatify(c.notFound),pending:c.pending&&a.templatify(c.pending),header:c.header&&a.templatify(c.header),footer:c.footer&&a.templatify(c.footer),suggestion:c.suggestion||f}}var g,d;return g={val:"tt-selectable-display",obj:"tt-selectable-object"},d=a.getIdGenerator(),h.extractData=function(a){a=b(a);return a.data(g.obj)?{val:a.data(g.val)||"",obj:a.data(g.obj)||null}:null},a.mixin(h.prototype,l,{_overwrite:function(a,b){b=b||[];b.length?this._renderSuggestions(a,b):
this.async&&this.templates.pending?this._renderPending(a):!this.async&&this.templates.notFound?this._renderNotFound(a):this._empty();this.trigger("rendered",this.name,b,!1)},_append:function(a,b){b=b||[];b.length&&this.$lastSuggestion.length?this._appendSuggestions(a,b):b.length?this._renderSuggestions(a,b):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(a);this.trigger("rendered",this.name,b,!0)},_renderSuggestions:function(a,b){var c=this._getSuggestionsFragment(a,b);
this.$lastSuggestion=c.children().last();this.$el.html(c).prepend(this._getHeader(a,b)).append(this._getFooter(a,b))},_appendSuggestions:function(a,b){a=this._getSuggestionsFragment(a,b);b=a.children().last();this.$lastSuggestion.after(a);this.$lastSuggestion=b},_renderPending:function(a){var b=this.templates.pending;this._resetLastSuggestion();b&&this.$el.html(b({query:a,dataset:this.name}))},_renderNotFound:function(a){var b=this.templates.notFound;this._resetLastSuggestion();b&&this.$el.html(b({query:a,
dataset:this.name}))},_empty:function(){this.$el.empty();this._resetLastSuggestion()},_getSuggestionsFragment:function(c,d){var f,e=this;return f=document.createDocumentFragment(),a.each(d,function(a){var d=e._injectQuery(c,a);a=b(e.templates.suggestion(d)).data(g.obj,a).data(g.val,e.displayFn(a)).addClass(e.classes.suggestion+" "+e.classes.selectable);f.appendChild(a[0])}),this.highlight&&n({className:this.classes.highlight,node:f,pattern:c}),b(f)},_getFooter:function(a,b){return this.templates.footer?
this.templates.footer({query:a,suggestions:b,dataset:this.name}):null},_getHeader:function(a,b){return this.templates.header?this.templates.header({query:a,suggestions:b,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=b()},_injectQuery:function(b,c){return a.isObject(c)?a.mixin({_query:b},c):c},update:function(a){function c(b){g||(g=!0,b=(b||[]).slice(0,d.limit),e=b.length,d._overwrite(a,b),e<d.limit&&d.async&&d.trigger("asyncRequested",a))}var d=this,f=!1,g=!1,e=0;
this.cancel();this.cancel=function(){f=!0;d.cancel=b.noop;d.async&&d.trigger("asyncCanceled",a)};this.source(a,c,function(c){c=c||[];!f&&e<d.limit&&(d.cancel=b.noop,e+=c.length,d._append(a,c.slice(0,d.limit-e)),d.async&&d.trigger("asyncReceived",a))});!g&&c([])},cancel:b.noop,clear:function(){this._empty();this.cancel();this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=b("<div>")}}),h}(),u=function(){function h(e,c){var g=this;e=e||{};e.node||b.error("node is required");
c.mixin(this);this.$node=b(e.node);this.query=null;this.datasets=a.map(e.datasets,function(a){var d=g.$node.find(a.node).first();return a.node=d.length?d:b("<div>").appendTo(g.$node),new y(a,c)})}return a.mixin(h.prototype,l,{_onSelectableClick:function(a){this.trigger("selectableClicked",b(a.currentTarget))},_onRendered:function(a,b,g,d){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetRendered",b,g,d)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,
this._allDatasetsEmpty());this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return a.every(this.datasets,function(a){return a.isEmpty()})},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var a=this.getActiveSelectable();a&&a.removeClass(this.classes.cursor)},_ensureVisible:function(a){var b=a.position().top;a=b+a.outerHeight(!0);var g=this.$node.scrollTop();var d=this.$node.height()+
parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);0>b?this.$node.scrollTop(g+b):a>d&&this.$node.scrollTop(g+(a-d))},bind:function(){var b,c=this;return b=a.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,b),a.each(this.datasets,function(a){a.onSync("asyncRequested",c._propagate,c).onSync("asyncCanceled",c._propagate,c).onSync("asyncReceived",c._propagate,c).onSync("rendered",c._onRendered,c).onSync("cleared",c._onCleared,c)}),
this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open);this._removeCursor()},setLanguageDirection:function(a){this.$node.attr("dir",a)},selectableRelativeToCursor:function(a){var b,g,d,f;return g=this.getActiveSelectable(),b=this._getSelectables(),d=g?b.index(g):-1,f=d+a,f=(f+1)%(b.length+1)-1,f=-1>f?b.length-1:f,-1===f?null:b.eq(f)},setCursor:function(a){this._removeCursor();
(a=a&&a.first())&&(a.addClass(this.classes.cursor),this._ensureVisible(a))},getSelectableData:function(a){return a&&a.length?y.extractData(a):null},getActiveSelectable:function(){var a=this._getSelectables().filter(this.selectors.cursor).first();return a.length?a:null},getTopSelectable:function(){var a=this._getSelectables().first();return a.length?a:null},update:function(b){function c(a){a.update(b)}var g=b!==this.query;return g&&(this.query=b,a.each(this.datasets,c)),g},empty:function(){a.each(this.datasets,
function(a){a.clear()});this.query=null;this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt");this.$node=b("<div>");a.each(this.datasets,function(a){a.destroy()})}}),h}(),w=function(){function b(){u.apply(this,[].slice.call(arguments,0))}var e=u.prototype;return a.mixin(b.prototype,u.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),e.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),e.close.apply(this,[].slice.call(arguments,
0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(a){return this.$node.css("ltr"===a?this.css.ltr:this.css.rtl),e.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display",
"block")}}),b}(),q=function(){function h(c,g){c=c||{};c.input||b.error("missing input");c.menu||b.error("missing menu");c.eventBus||b.error("missing event bus");g.mixin(this);this.eventBus=c.eventBus;this.minLength=a.isNumber(c.minLength)?c.minLength:1;this.input=c.input;this.menu=c.menu;this.enabled=!0;this.active=!1;this.input.hasFocus()&&this.activate();this.dir=this.input.getLangDir();this._hacks();this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",
this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this);c=e(this,"activate","open","_onFocused");g=e(this,"deactivate","_onBlurred");var d=e(this,"isActive","isOpen","_onEnterKeyed");var f=e(this,"isActive","isOpen","_onTabKeyed");var h=e(this,"isActive","_onEscKeyed");var v=e(this,"isActive","open","_onUpKeyed");var q=
e(this,"isActive","open","_onDownKeyed");var r=e(this,"isActive","isOpen","_onLeftKeyed");var x=e(this,"isActive","isOpen","_onRightKeyed");var z=e(this,"_openIfActive","_onQueryChanged");var k=e(this,"_openIfActive","_onWhitespaceChanged");this.input.bind().onSync("focused",c,this).onSync("blurred",g,this).onSync("enterKeyed",d,this).onSync("tabKeyed",f,this).onSync("escKeyed",h,this).onSync("upKeyed",v,this).onSync("downKeyed",q,this).onSync("leftKeyed",r,this).onSync("rightKeyed",x,this).onSync("queryChanged",
z,this).onSync("whitespaceChanged",k,this).onSync("langDirChanged",this._onLangDirChanged,this)}function e(b){var c=[].slice.call(arguments,1);return function(){var d=[].slice.call(arguments);a.each(c,function(a){return b[a].apply(b,d)})}}return a.mixin(h.prototype,{_hacks:function(){var c=this.input.$input||b("<div>");var g=this.menu.$node||b("<div>");c.on("blur.tt",function(b){var d=document.activeElement;var e=g.is(d);d=0<g.has(d).length;a.isMsie()&&(e||d)&&(b.preventDefault(),b.stopImmediatePropagation(),
a.defer(function(){c.focus()}))});g.on("mousedown.tt",function(a){a.preventDefault()})},_onSelectableClicked:function(a,b){this.select(b)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(a,b,d,f){this._updateHint();this.eventBus.trigger("render",d,f,b)},_onAsyncRequested:function(a,b,d){this.eventBus.trigger("asyncrequest",d,b)},_onAsyncCanceled:function(a,b,d){this.eventBus.trigger("asynccancel",d,b)},_onAsyncReceived:function(a,b,d){this.eventBus.trigger("asyncreceive",
d,b)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())&&this.select(c)&&b.preventDefault()},_onTabKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())?this.select(c)&&b.preventDefault():(c=this.menu.getTopSelectable())&&this.autocomplete(c)&&b.preventDefault()},_onEscKeyed:function(){this.close()},
_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(a,b){this._minLengthMet(b)?this.menu.update(b):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(a,b){this.dir!==
b&&(this.dir=b,this.menu.setLanguageDirection(b))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(b){return b=a.isString(b)?b:this.input.getQuery()||"",b.length>=this.minLength},_updateHint:function(){var b,g,d,f;var e=this.menu.getTopSelectable();e=this.menu.getSelectableData(e);var h=this.input.getInputValue();!e||a.isBlankString(h)||this.input.hasOverflow()?this.input.clearHint():(b=t.normalizeQuery(h),g=a.escapeRegExChars(b),d=new RegExp("^(?:"+g+")(.+$)","i"),f=
d.exec(e.val),f&&this.input.setHint(h+f[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},
open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(b){this.input.setQuery(a.toStr(b))},getVal:function(){return this.input.getQuery()},select:function(a){return(a=this.menu.getSelectableData(a))&&
!this.eventBus.before("select",a.obj)?(this.input.setQuery(a.val,!0),this.eventBus.trigger("select",a.obj),this.close(),!0):!1},autocomplete:function(a){var b,c,f;return b=this.input.getQuery(),c=this.menu.getSelectableData(a),f=c&&b!==c.val,f&&!this.eventBus.before("autocomplete",c.obj)?(this.input.setQuery(c.val),this.eventBus.trigger("autocomplete",c.obj),!0):!1},moveCursor:function(a){var b,c,f,e,h;return b=this.input.getQuery(),c=this.menu.selectableRelativeToCursor(a),f=this.menu.getSelectableData(c),
e=f?f.obj:null,h=this._minLengthMet()&&this.menu.update(b),h||this.eventBus.before("cursorchange",e)?!1:(this.menu.setCursor(c),f?this.input.setInputValue(f.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",e),!0)},destroy:function(){this.input.destroy();this.menu.destroy()}}),h}();!function(){function h(a,c){a.each(function(){var a,d=b(this);(a=d.data(v.typeahead))&&c(a,d)})}function e(a,b){return a.clone().addClass(b.classes.hint).removeData().css(b.css.hint).css(g(a)).prop("readonly",
!0).removeAttr("id name placeholder required").attr({autocomplete:"new-password",spellcheck:"false",tabindex:-1})}function c(a,b){a.data(v.attrs,{dir:a.attr("dir"),autocomplete:a.attr("autocomplete"),spellcheck:a.attr("spellcheck"),style:a.attr("style")});a.addClass(b.classes.input).attr({autocomplete:"new-password",spellcheck:!1});try{!a.attr("dir")&&a.attr("dir","auto")}catch(z){}return a}function g(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),
backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function d(b){var c=b.data(v.www);var d=b.parent().filter(c.selectors.wrapper);a.each(b.data(v.attrs),function(c,d){a.isUndefined(c)?b.removeAttr(d):b.attr(d,c)});b.removeData(v.typeahead).removeData(v.www).removeData(v.attr).removeClass(c.classes.input);
d.length&&(b.detach().insertAfter(d),d.remove())}function f(c){var d,f;return d=a.isJQuery(c)||a.isElement(c),f=d?b(c).first():[],f.length?f:null}var p=b.fn.typeahead;var v={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"};var l={initialize:function(d,g){var h;return g=a.isArray(g)?g:[].slice.call(arguments,1),d=d||{},h=k(d.classNames),this.each(function(){a.each(g,function(a){a.highlight=!!d.highlight});var p=b(this);var r=b(h.html.wrapper);var k=f(d.hint);var x=f(d.menu);var z=!1!==d.hint&&
!k;var l=!1!==d.menu&&!x;z&&(k=e(p,h));l&&(x=b(h.html.menu).css(h.css.menu));k&&k.val("");p=c(p,h);(z||l)&&(r.css(h.css.wrapper),p.css(z?h.css.input:h.css.inputWithNoHint),p.wrap(r).parent().prepend(z?k:null).append(l?x:null));z=l?w:u;r=new m({el:p});k=new t({hint:k,input:p},h);x=new z({node:x,datasets:g},h);x=new q({input:k,menu:x,eventBus:r,minLength:d.minLength},h);p.data(v.www,h);p.data(v.typeahead,x)})},isEnabled:function(){var a;return h(this.first(),function(b){a=b.isEnabled()}),a},enable:function(){return h(this,
function(a){a.enable()}),this},disable:function(){return h(this,function(a){a.disable()}),this},isActive:function(){var a;return h(this.first(),function(b){a=b.isActive()}),a},activate:function(){return h(this,function(a){a.activate()}),this},deactivate:function(){return h(this,function(a){a.deactivate()}),this},isOpen:function(){var a;return h(this.first(),function(b){a=b.isOpen()}),a},open:function(){return h(this,function(a){a.open()}),this},close:function(){return h(this,function(a){a.close()}),
this},select:function(a){var c=!1,d=b(a);return h(this.first(),function(a){c=a.select(d)}),c},autocomplete:function(a){var c=!1,d=b(a);return h(this.first(),function(a){c=a.autocomplete(d)}),c},moveCursor:function(a){var b=!1;return h(this.first(),function(c){b=c.moveCursor(a)}),b},val:function(a){var b;return arguments.length?(h(this,function(b){b.setVal(a)}),this):(h(this.first(),function(a){b=a.getVal()}),b)},destroy:function(){return h(this,function(a,b){d(b);a.destroy()}),this}};b.fn.typeahead=
function(a){return l[a]?l[a].apply(this,[].slice.call(arguments,1)):l.initialize.apply(this,arguments)};b.fn.typeahead.noConflict=function(){return b.fn.typeahead=p,this}}()});
!function(b,a){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(k){return b.Bloodhound=a(k)}):"object"==typeof exports?module.exports=a(require("jquery")):b.Bloodhound=a(jQuery)}(this,function(b){var a=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,
"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:b.isArray,isFunction:b.isFunction,isObject:b.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(a){return a instanceof b},toStr:function(b){return a.isUndefined(b)||null===b?"":b+""},bind:b.proxy,each:function(a,h){b.each(a,function(a,b){return h(b,a)})},map:b.map,filter:b.grep,every:function(a,h){var e=
!0;return a?(b.each(a,function(b,g){return(e=h.call(null,g,b,a))?void 0:!1}),!!e):e},some:function(a,h){var e=!1;return a?(b.each(a,function(b,g){return(e=h.call(null,g,b,a))?!1:void 0}),!!e):e},mixin:b.extend,identity:function(a){return a},clone:function(a){return b.extend(!0,{},a)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(a){function h(){return String(a)}return b.isFunction(a)?a:h},defer:function(a){setTimeout(a,0)},debounce:function(a,b,e){var c,g;return function(){var d,
f,h=this,v=arguments;return d=function(){c=null;e||(g=a.apply(h,v))},f=e&&!c,clearTimeout(c),c=setTimeout(d,b),f&&(g=a.apply(h,v)),g}},throttle:function(a,b){var e,c,g,d,f,h;return f=0,h=function(){f=new Date;g=null;d=a.apply(e,c)},function(){var p=new Date,k=b-(p-f);return e=this,c=arguments,0>=k?(clearTimeout(g),g=null,f=p,d=a.apply(e,c)):g||(g=setTimeout(h,k)),d}},stringify:function(b){return a.isString(b)?b:JSON.stringify(b)},noop:function(){}}}(),k=function(){function b(b){return b=a.toStr(b),
b?b.split(/\s+/):[]}function h(b){return b=a.toStr(b),b?b.split(/\W+/):[]}function e(b){return function(c){return c=a.isArray(c)?c:[].slice.call(arguments,0),function(d){var f=[];return a.each(c,function(c){f=f.concat(b(a.toStr(d[c])))}),f}}}return{nonword:h,whitespace:b,obj:{nonword:e(h),whitespace:e(b)}}}(),m=function(){function k(c){this.maxSize=a.isNumber(c)?c:100;this.reset();0>=this.maxSize&&(this.set=this.get=b.noop)}function h(){this.head=this.tail=null}function e(a,b){this.key=a;this.val=
b;this.prev=this.next=null}return a.mixin(k.prototype,{set:function(a,b){var c,f=this.list.tail;this.size>=this.maxSize&&(this.list.remove(f),delete this.hash[f.key],this.size--);(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new e(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){return(a=this.hash[a])?(this.list.moveToFront(a),a.val):void 0},reset:function(){this.size=0;this.hash={};this.list=new h}}),a.mixin(h.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=
a);this.head=a;this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next;a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a);this.add(a)}}),k}(),l=function(){function k(b,g){this.prefix=["__",b,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+a.escapeRegExChars(this.prefix));this.ls=g||e;!this.ls&&this._noop()}function h(b){return JSON.stringify(a.isUndefined(b)?null:b)}try{var e=window.localStorage;e.setItem("~~~","!");
e.removeItem("~~~")}catch(c){e=null}return a.mixin(k.prototype,{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=a.noop},_safeSet:function(a,b){try{this.ls.setItem(a,b)}catch(d){"QuotaExceededError"===d.name&&(this.clear(),this._noop())}},get:function(a){return this.isExpired(a)&&this.remove(a),b.parseJSON(this.ls.getItem(this._prefix(a)))},set:function(b,e,d){return a.isNumber(d)?
this._safeSet(this._ttlKey(b),h((new Date).getTime()+d)):this.ls.removeItem(this._ttlKey(b)),this._safeSet(this._prefix(b),h(e))},remove:function(a){return this.ls.removeItem(this._ttlKey(a)),this.ls.removeItem(this._prefix(a)),this},clear:function(){var a=this.keyMatcher;var b,d,f=[],h=e.length;for(b=0;h>b;b++)(d=e.key(b)).match(a)&&f.push(d.replace(a,""));for(a=f.length;a--;)this.remove(f[a]);return this},isExpired:function(c){c=b.parseJSON(this.ls.getItem(this._ttlKey(c)));return a.isNumber(c)&&
(new Date).getTime()>c?!0:!1}}),k}(),n=function(){function k(a){a=a||{};this.cancelled=!1;this.lastReq=null;this._send=a.transport;this._get=a.limiter?a.limiter(this._get):this._get;this._cache=!1===a.cache?new m(0):g}var h=0,e={},c=6,g=new m(10);return k.setMaxPendingRequests=function(a){c=a},k.resetCache=function(){g.reset()},a.mixin(k.prototype,{_fingerprint:function(a){return a=a||{},a.url+a.type+b.param(a.data||{})},_get:function(a,b){function d(a){b(null,a);k._cache.set(l,a)}function f(){b(!0)}
function g(){h--;delete e[l];k.onDeckRequestArgs&&(k._get.apply(k,k.onDeckRequestArgs),k.onDeckRequestArgs=null)}var r,k=this;var l=this._fingerprint(a);this.cancelled||l!==this.lastReq||((r=e[l])?r.done(d).fail(f):c>h?(h++,e[l]=this._send(a).done(d).fail(f).always(g)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(c,f){var d;f=f||b.noop;c=a.isString(c)?{url:c}:c||{};var e=this._fingerprint(c);this.cancelled=!1;this.lastReq=e;(d=this._cache.get(e))?f(null,d):this._get(c,f)},cancel:function(){this.cancelled=
!0}}),k}(),t=window.SearchIndex=function(){function k(c){c=c||{};c.datumTokenizer&&c.queryTokenizer||b.error("datumTokenizer and queryTokenizer are both required");this.identify=c.identify||a.stringify;this.datumTokenizer=c.datumTokenizer;this.queryTokenizer=c.queryTokenizer;this.reset()}function h(b){return b=a.filter(b,function(a){return!!a}),b=a.map(b,function(a){return a.toLowerCase()})}function e(){var a={};return a[d]=[],a[g]={},a}function c(a){for(var b={},c=[],d=0,f=a.length;f>d;d++)b[a[d]]||
(b[a[d]]=!0,c.push(a[d]));return c}var g="c",d="i";return a.mixin(k.prototype,{bootstrap:function(a){this.datums=a.datums;this.trie=a.trie},add:function(b){var c=this;b=a.isArray(b)?b:[b];a.each(b,function(b){var f;c.datums[f=c.identify(b)]=b;b=h(c.datumTokenizer(b));a.each(b,function(a){var b;var h=c.trie;for(a=a.split("");b=a.shift();)h=h[g][b]||(h[g][b]=e()),h[d].push(f)})})},get:function(b){var c=this;return a.map(b,function(a){return c.datums[a]})},search:function(b){var f,e,k=this;return f=
h(this.queryTokenizer(b)),a.each(f,function(a){var b;if(e&&0===e.length)return!1;var c=k.trie;for(a=a.split("");c&&(b=a.shift());)c=c[g][b];if(c&&0===a.length){b=c[d].slice(0);if(e){c=e;var f=a=0,h=[];c=c.sort();b=b.sort();for(var p=c.length,r=b.length;p>a&&r>f;)c[a]<b[f]?a++:c[a]>b[f]?f++:(h.push(c[a]),a++,f++);c=h}else c=b;c=void(e=c)}else c=(e=[],!1);return c}),e?a.map(c(e),function(a){return k.datums[a]}):[]},all:function(){var a=[],b;for(b in this.datums)a.push(this.datums[b]);return a},reset:function(){this.datums=
{};this.trie=e()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),k}(),y=function(){function b(a){this.url=a.url;this.ttl=a.ttl;this.cache=a.cache;this.prepare=a.prepare;this.transform=a.transform;this.transport=a.transport;this.thumbprint=a.thumbprint;this.storage=new l(a.cacheKey)}var h;return h={data:"data",protocol:"protocol",thumbprint:"thumbprint"},a.mixin(b.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(a){this.cache&&(this.storage.set(h.data,
a,this.ttl),this.storage.set(h.protocol,location.protocol,this.ttl),this.storage.set(h.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var a,b,g,d;return this.cache?(b=this.storage.get(h.data),g=this.storage.get(h.protocol),d=this.storage.get(h.thumbprint),a=d!==this.thumbprint||g!==location.protocol,b&&!a?b:null):null},fromNetwork:function(a){function b(){a(!0)}function e(b){a(null,f.transform(b))}var d,f=this;a&&(d=this.prepare(this._settings()),this.transport(d).fail(b).done(e))},clear:function(){return this.storage.clear(),
this}}),b}(),u=function(){function b(a){this.url=a.url;this.prepare=a.prepare;this.transform=a.transform;this.transport=new n({cache:a.cache,limiter:a.limiter,transport:a.transport})}return a.mixin(b.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(a,b){function c(a,c){b(a?[]:d.transform(c))}var e,d=this;if(b)return a=a||"",e=this.prepare(a,this._settings()),this.transport.get(e,c)},cancelLastRequest:function(){this.transport.cancel()}}),b}(),w=function(){function k(c){var d;
return c?(d={url:null,ttl:864E5,cache:!0,cacheKey:null,thumbprint:"",prepare:a.identity,transform:a.identity,transport:null},c=a.isString(c)?{url:c}:c,c=a.mixin(d,c),!c.url&&b.error("prefetch requires url to be set"),c.transform=c.filter||c.transform,c.cacheKey=c.cacheKey||c.url,c.thumbprint="0.11.1"+c.thumbprint,c.transport=c.transport?g(c.transport):b.ajax,c):null}function h(d){var f;if(d)return f={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,
transform:a.identity,transport:null},d=a.isString(d)?{url:d}:d,d=a.mixin(f,d),!d.url&&b.error("remote requires url to be set"),d.transform=d.filter||d.transform,d.prepare=e(d),d.limiter=c(d),d.transport=d.transport?g(d.transport):b.ajax,delete d.replace,delete d.wildcard,delete d.rateLimitBy,delete d.rateLimitWait,d}function e(a){function b(a,b){return b.url=g(b.url,a),b}function c(a,b){return b.url=b.url.replace(h,encodeURIComponent(a)),b}function d(a,b){return b}var e,g,h;return e=a.prepare,g=a.replace,
h=a.wildcard,e?e:e=g?b:a.wildcard?c:d}function c(b){function c(b){return function(c){return a.debounce(c,b)}}function d(b){return function(c){return a.throttle(c,b)}}var e,g,h;return e=b.limiter,g=b.rateLimitBy,h=b.rateLimitWait,e||(e=/^throttle$/i.test(g)?d(h):c(h)),e}function g(c){return function(d){var f=b.Deferred();return c(d,function(b){a.defer(function(){f.resolve(b)})},function(b){a.defer(function(){f.reject(b)})}),f}}return function(c){var d,e;return d={initialize:!0,identify:a.stringify,
datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},c=a.mixin(d,c||{}),!c.datumTokenizer&&b.error("datumTokenizer is required"),!c.queryTokenizer&&b.error("queryTokenizer is required"),e=c.sorter,c.sorter=e?function(a){return a.sort(e)}:a.identity,c.local=a.isFunction(c.local)?c.local():c.local,c.prefetch=k(c.prefetch),c.remote=h(c.remote),c}}();return function(){function l(a){a=w(a);this.sorter=a.sorter;this.identify=a.identify;this.sufficient=a.sufficient;
this.local=a.local;this.remote=a.remote?new u(a.remote):null;this.prefetch=a.prefetch?new y(a.prefetch):null;this.index=new t({identify:this.identify,datumTokenizer:a.datumTokenizer,queryTokenizer:a.queryTokenizer});!1!==a.initialize&&this.initialize()}var h;return h=window&&window.Bloodhound,l.noConflict=function(){return window&&(window.Bloodhound=h),l},l.tokenizers=k,a.mixin(l.prototype,{__ttAdapter:function(){function a(a,b,c){return g.search(a,b,c)}function b(a,b){return g.search(a,b)}var g=
this;return this.remote?a:b},_loadPrefetch:function(){function a(a,b){return a?c.reject():(d.add(b),d.prefetch.store(d.index.serialize()),void c.resolve())}var c,g,d=this;return c=b.Deferred(),this.prefetch?(g=this.prefetch.fromCache())?(this.index.bootstrap(g),c.resolve()):this.prefetch.fromNetwork(a):c.resolve(),c.promise()},_initialize:function(){var a=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(function(){a.add(a.local)}),this.initPromise},initialize:function(a){return!this.initPromise||
a?this._initialize():this.initPromise},add:function(a){return this.index.add(a),this},get:function(b){return b=a.isArray(b)?b:[].slice.call(arguments),this.index.get(b)},search:function(b,c,g){function d(b){var c=[];a.each(b,function(b){!a.some(f,function(a){return e.identify(b)===e.identify(a)})&&c.push(b)});g&&g(c)}var f,e=this;return f=this.sorter(this.index.search(b)),c(this.remote?f.slice():f),this.remote&&f.length<this.sufficient?this.remote.get(b,d):this.remote&&this.remote.cancelLastRequest(),
this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return n.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),l}()});
(function(b,a){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(b){return a(b)}):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)})(this,function(b){var a=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},
isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:b.isArray,isFunction:b.isFunction,isObject:b.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(a){return a instanceof b},toStr:function(b){return a.isUndefined(b)||null===b?"":b+""},bind:b.proxy,each:function(a,e){b.each(a,function(a,b){return e(b,a)})},map:b.map,filter:b.grep,every:function(a,e){var c=!0;return a?
(b.each(a,function(b,d){return(c=e.call(null,d,b,a))?void 0:!1}),!!c):c},some:function(a,e){var c=!1;return a?(b.each(a,function(b,d){return(c=e.call(null,d,b,a))?!1:void 0}),!!c):c},mixin:b.extend,identity:function(a){return a},clone:function(a){return b.extend(!0,{},a)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(a){function e(){return String(a)}return b.isFunction(a)?a:e},defer:function(a){setTimeout(a,0)},debounce:function(a,b,c){var g,d;return function(){var f,
e,h=this,k=arguments;return f=function(){g=null;c||(d=a.apply(h,k))},e=c&&!g,clearTimeout(g),g=setTimeout(f,b),e&&(d=a.apply(h,k)),d}},throttle:function(a,b){var c,g,d,f,e,h;return e=0,h=function(){e=new Date;d=null;f=a.apply(c,g)},function(){var k=new Date,p=b-(k-e);return c=this,g=arguments,0>=p?(clearTimeout(d),d=null,e=k,f=a.apply(c,g)):d||(d=setTimeout(h,p)),f}},stringify:function(b){return a.isString(b)?b:JSON.stringify(b)},noop:function(){}}}(),k=function(){function b(b){var c={};return a.each(b,
function(a,b){c[b]="."+a}),c}function e(){var b={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return a.isMsie()&&a.mixin(b.input,
{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),b}var c={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return function(g){var d,f;return f=a.mixin({},c,g),d={css:e(),classes:f,html:{wrapper:'<span class="'+f.wrapper+'"></span>',menu:'<div class="'+f.menu+'"></div>'},
selectors:b(f)},{css:d.css,html:d.html,classes:d.classes,selectors:d.selectors,mixin:function(b){a.mixin(b,d)}}}}(),m=function(){function h(a){a&&a.el||b.error("EventBus initialized without el");this.$el=b(a.el)}var e;return e={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},a.mixin(h.prototype,{_trigger:function(a,e){var c;return c=b.Event("typeahead:"+a),(e=e||[]).unshift(c),this.$el.trigger.apply(this.$el,e),c},before:function(a){var b,c;return b=
[].slice.call(arguments,1),c=this._trigger("before"+a,b),c.isDefaultPrevented()},trigger:function(a){var b;this._trigger(a,[].slice.call(arguments,1));(b=e[a])&&this._trigger(b,[].slice.call(arguments,1))}}),h}(),l=function(){function a(a,b,d,e){if(!d)return this;b=b.split(g);d=e?c(d,e):d;for(this._callbacks=this._callbacks||{};e=b.shift();)this._callbacks[e]=this._callbacks[e]||{sync:[],async:[]},this._callbacks[e][a].push(d);return this}function b(a,b,c){return function(){for(var d,f=0,e=a.length;!d&&
e>f;f+=1)d=!1===a[f].apply(b,c);return!d}}function c(a,b){return a.bind?a.bind(b):function(){a.apply(b,[].slice.call(arguments,0))}}var g=/\s+/,d=function(){return window.setImmediate?function(a){setImmediate(function(){a()})}:function(a){setTimeout(function(){a()},0)}}();return{onSync:function(b,c,d){return a.call(this,"sync",b,c,d)},onAsync:function(b,c,d){return a.call(this,"async",b,c,d)},off:function(a){var b;if(!this._callbacks)return this;for(a=a.split(g);b=a.shift();)delete this._callbacks[b];
return this},trigger:function(a){var c,f,e;if(!this._callbacks)return this;a=a.split(g);for(e=[].slice.call(arguments,1);(c=a.shift())&&(f=this._callbacks[c]);){var h=b(f.sync,this,[c].concat(e));var k=b(f.async,this,[c].concat(e));h()&&d(k)}return this}}}(),n=function(b){function e(b,c,f){for(var d,e=[],g=0,h=b.length;h>g;g++)e.push(a.escapeRegExChars(b[g]));return d=f?"\\b("+e.join("|")+")\\b":"("+e.join("|")+")",c?new RegExp(d):new RegExp(d,"i")}var c={node:null,pattern:null,tagName:"strong",className:null,
wordsOnly:!1,caseSensitive:!1};return function(g){function d(a){var c,d,f;return(c=h.exec(a.data))&&(f=b.createElement(g.tagName),g.className&&(f.className=g.className),d=a.splitText(c.index),d.splitText(c[0].length),f.appendChild(d.cloneNode(!0)),a.parentNode.replaceChild(f,d)),!!c}function f(a,b){for(var c,d=0;d<a.childNodes.length;d++)c=a.childNodes[d],3===c.nodeType?d+=b(c)?1:0:f(c,b)}var h;g=a.mixin({},c,g);g.node&&g.pattern&&(g.pattern=a.isArray(g.pattern)?g.pattern:[g.pattern],h=e(g.pattern,
g.caseSensitive,g.wordsOnly),f(g.node,d))}}(window.document),t=function(){function h(c,e){c=c||{};c.input||b.error("input is missing");e.mixin(this);this.$hint=b(c.hint);this.$input=b(c.input);this.query=this.$input.val();this.queryWhenFocused=this.hasFocus()?this.query:null;c=this.$input;this.$overflowHelper=b('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:c.css("font-family"),fontSize:c.css("font-size"),fontStyle:c.css("font-style"),fontVariant:c.css("font-variant"),
fontWeight:c.css("font-weight"),wordSpacing:c.css("word-spacing"),letterSpacing:c.css("letter-spacing"),textIndent:c.css("text-indent"),textRendering:c.css("text-rendering"),textTransform:c.css("text-transform")}).insertAfter(c);this._checkLanguageDirection();0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=a.noop)}var e;return e={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},h.normalizeQuery=function(b){return a.toStr(b).replace(/^\s*/g,
"").replace(/\s{2,}/g," ")},a.mixin(h.prototype,l,{_onBlur:function(){this.resetInputValue();this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query;this.trigger("focused")},_onKeydown:function(a){var b=e[a.which||a.keyCode];this._managePreventDefault(b,a);b&&this._shouldTrigger(b,a)&&this.trigger(b+"Keyed",a)},_onInput:function(){this._setQuery(this.getInputValue());this.clearHintIfInvalid();this._checkLanguageDirection()},_managePreventDefault:function(a,b){switch(a){case "up":case "down":a=
!(b.altKey||b.ctrlKey||b.metaKey||b.shiftKey);break;default:a=!1}a&&b.preventDefault()},_shouldTrigger:function(a,b){switch(a){case "tab":a=!(b.altKey||b.ctrlKey||b.metaKey||b.shiftKey);break;default:a=!0}return a},_checkLanguageDirection:function(){var a=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==a&&(this.dir=a,this.$hint.attr("dir",a),this.trigger("langDirChanged",a))},_setQuery:function(a,b){var c;var f=this.query;f=(c=h.normalizeQuery(a)===h.normalizeQuery(f))?this.query.length!==
a.length:!1;this.query=a;b||c?!b&&f&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var b,g,d,f,h=this;return b=a.bind(this._onBlur,this),g=a.bind(this._onFocus,this),d=a.bind(this._onKeydown,this),f=a.bind(this._onInput,this),this.$input.on("blur.tt",b).on("focus.tt",g).on("keydown.tt",d),!a.isMsie()||9<a.isMsie()?this.$input.on("input.tt",f):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(b){e[b.which||b.keyCode]||a.defer(a.bind(h._onInput,
h,b))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(a,b){this.setInputValue(a);this._setQuery(a,b)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(a){this.$input.val(a);this.clearHintIfInvalid();this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},
getHint:function(){return this.$hint.val()},setHint:function(a){this.$hint.val(a)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var a=this.getInputValue();var b=this.getHint();b=a!==b&&0===b.indexOf(a);""!==a&&b&&!this.hasOverflow()||this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var a=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=a},isCursorAtEnd:function(){var b,e,
d;return b=this.$input.val().length,e=this.$input[0].selectionStart,a.isNumber(e)?e===b:document.selection?(d=document.selection.createRange(),d.moveStart("character",-b),b===d.text.length):!0},destroy:function(){this.$hint.off(".tt");this.$input.off(".tt");this.$overflowHelper.remove();this.$hint=this.$input=this.$overflowHelper=b("<div>")}}),h}(),y=function(){function h(f,g){f=f||{};f.templates=f.templates||{};f.templates.notFound=f.templates.notFound||f.templates.empty;f.source||b.error("missing source");
f.node||b.error("missing node");f.name&&!/^[_a-zA-Z0-9-]+$/.test(f.name)&&b.error("invalid dataset name: "+f.name);g.mixin(this);this.highlight=!!f.highlight;this.name=f.name||d();this.limit=f.limit||5;this.displayFn=e(f.display||f.displayKey);this.templates=c(f.templates,this.displayFn);this.source=f.source.__ttAdapter?f.source.__ttAdapter():f.source;this.async=a.isUndefined(f.async)?2<this.source.length:!!f.async;this._resetLastSuggestion();this.$el=b(f.node).addClass(this.classes.dataset).addClass(this.classes.dataset+
"-"+this.name)}function e(b){function c(a){return a[b]}return b=b||a.stringify,a.isFunction(b)?b:c}function c(c,d){function f(a){return b("<div>").text(d(a))}return{notFound:c.notFound&&a.templatify(c.notFound),pending:c.pending&&a.templatify(c.pending),header:c.header&&a.templatify(c.header),footer:c.footer&&a.templatify(c.footer),suggestion:c.suggestion||f}}var g,d;return g={val:"tt-selectable-display",obj:"tt-selectable-object"},d=a.getIdGenerator(),h.extractData=function(a){a=b(a);return a.data(g.obj)?
{val:a.data(g.val)||"",obj:a.data(g.obj)||null}:null},a.mixin(h.prototype,l,{_overwrite:function(a,b){b=b||[];b.length?this._renderSuggestions(a,b):this.async&&this.templates.pending?this._renderPending(a):!this.async&&this.templates.notFound?this._renderNotFound(a):this._empty();this.trigger("rendered",this.name,b,!1)},_append:function(a,b){b=b||[];b.length&&this.$lastSuggestion.length?this._appendSuggestions(a,b):b.length?this._renderSuggestions(a,b):!this.$lastSuggestion.length&&this.templates.notFound&&
this._renderNotFound(a);this.trigger("rendered",this.name,b,!0)},_renderSuggestions:function(a,b){var c=this._getSuggestionsFragment(a,b);this.$lastSuggestion=c.children().last();this.$el.html(c).prepend(this._getHeader(a,b)).append(this._getFooter(a,b))},_appendSuggestions:function(a,b){a=this._getSuggestionsFragment(a,b);b=a.children().last();this.$lastSuggestion.after(a);this.$lastSuggestion=b},_renderPending:function(a){var b=this.templates.pending;this._resetLastSuggestion();b&&this.$el.html(b({query:a,
dataset:this.name}))},_renderNotFound:function(a){var b=this.templates.notFound;this._resetLastSuggestion();b&&this.$el.html(b({query:a,dataset:this.name}))},_empty:function(){this.$el.empty();this._resetLastSuggestion()},_getSuggestionsFragment:function(c,d){var e,f=this;return e=document.createDocumentFragment(),a.each(d,function(a){var d=f._injectQuery(c,a);a=b(f.templates.suggestion(d)).data(g.obj,a).data(g.val,f.displayFn(a)).addClass(f.classes.suggestion+" "+f.classes.selectable);e.appendChild(a[0])}),
this.highlight&&n({className:this.classes.highlight,node:e,pattern:c}),b(e)},_getFooter:function(a,b){return this.templates.footer?this.templates.footer({query:a,suggestions:b,dataset:this.name}):null},_getHeader:function(a,b){return this.templates.header?this.templates.header({query:a,suggestions:b,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=b()},_injectQuery:function(b,c){return a.isObject(c)?a.mixin({_query:b},c):c},update:function(a){function c(b){f||(f=!0,b=
(b||[]).slice(0,d.limit),g=b.length,d._overwrite(a,b),g<d.limit&&d.async&&d.trigger("asyncRequested",a))}var d=this,e=!1,f=!1,g=0;this.cancel();this.cancel=function(){e=!0;d.cancel=b.noop;d.async&&d.trigger("asyncCanceled",a)};this.source(a,c,function(c){c=c||[];!e&&g<d.limit&&(d.cancel=b.noop,g+=c.length,d._append(a,c.slice(0,d.limit-g)),d.async&&d.trigger("asyncReceived",a))});!f&&c([])},cancel:b.noop,clear:function(){this._empty();this.cancel();this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},
destroy:function(){this.$el=b("<div>")}}),h}(),u=function(){function h(e,c){var g=this;e=e||{};e.node||b.error("node is required");c.mixin(this);this.$node=b(e.node);this.query=null;this.datasets=a.map(e.datasets,function(a){var d=g.$node.find(a.node).first();return a.node=d.length?d:b("<div>").appendTo(g.$node),new y(a,c)})}return a.mixin(h.prototype,l,{_onSelectableClick:function(a){this.trigger("selectableClicked",b(a.currentTarget))},_onRendered:function(a,b,g,d){this.$node.toggleClass(this.classes.empty,
this._allDatasetsEmpty());this.trigger("datasetRendered",b,g,d)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty());this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){return a.every(this.datasets,function(a){return a.isEmpty()})},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var a=this.getActiveSelectable();a&&a.removeClass(this.classes.cursor)},
_ensureVisible:function(a){var b=a.position().top;a=b+a.outerHeight(!0);var e=this.$node.scrollTop();var d=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10);0>b?this.$node.scrollTop(e+b):a>d&&this.$node.scrollTop(e+(a-d))},bind:function(){var b,c=this;return b=a.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,b),a.each(this.datasets,function(a){a.onSync("asyncRequested",c._propagate,c).onSync("asyncCanceled",
c._propagate,c).onSync("asyncReceived",c._propagate,c).onSync("rendered",c._onRendered,c).onSync("cleared",c._onCleared,c)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open);this._removeCursor()},setLanguageDirection:function(a){this.$node.attr("dir",a)},selectableRelativeToCursor:function(a){var b,e,d,f;return e=this.getActiveSelectable(),b=this._getSelectables(),
d=e?b.index(e):-1,f=d+a,f=(f+1)%(b.length+1)-1,f=-1>f?b.length-1:f,-1===f?null:b.eq(f)},setCursor:function(a){this._removeCursor();(a=a&&a.first())&&(a.addClass(this.classes.cursor),this._ensureVisible(a))},getSelectableData:function(a){return a&&a.length?y.extractData(a):null},getActiveSelectable:function(){var a=this._getSelectables().filter(this.selectors.cursor).first();return a.length?a:null},getTopSelectable:function(){var a=this._getSelectables().first();return a.length?a:null},update:function(b){function c(a){a.update(b)}
var e=b!==this.query;return e&&(this.query=b,a.each(this.datasets,c)),e},empty:function(){a.each(this.datasets,function(a){a.clear()});this.query=null;this.$node.addClass(this.classes.empty)},destroy:function(){this.$node.off(".tt");this.$node=b("<div>");a.each(this.datasets,function(a){a.destroy()})}}),h}(),w=function(){function b(){u.apply(this,[].slice.call(arguments,0))}var e=u.prototype;return a.mixin(b.prototype,u.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),e.open.apply(this,
[].slice.call(arguments,0))},close:function(){return this._hide(),e.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),e._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(a){return this.$node.css("ltr"===a?this.css.ltr:this.css.rtl),
e.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),b}(),q=function(){function h(c,g){c=c||{};c.input||b.error("missing input");c.menu||b.error("missing menu");c.eventBus||b.error("missing event bus");g.mixin(this);this.eventBus=c.eventBus;this.minLength=a.isNumber(c.minLength)?c.minLength:1;this.input=c.input;this.menu=c.menu;this.enabled=!0;this.active=!1;this.input.hasFocus()&&this.activate();this.dir=
this.input.getLangDir();this._hacks();this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this);c=e(this,"activate","open","_onFocused");g=e(this,"deactivate","_onBlurred");var d=e(this,"isActive","isOpen","_onEnterKeyed");
var f=e(this,"isActive","isOpen","_onTabKeyed");var h=e(this,"isActive","_onEscKeyed");var k=e(this,"isActive","open","_onUpKeyed");var l=e(this,"isActive","open","_onDownKeyed");var r=e(this,"isActive","isOpen","_onLeftKeyed");var q=e(this,"isActive","isOpen","_onRightKeyed");var m=e(this,"_openIfActive","_onQueryChanged");var A=e(this,"_openIfActive","_onWhitespaceChanged");this.input.bind().onSync("focused",c,this).onSync("blurred",g,this).onSync("enterKeyed",d,this).onSync("tabKeyed",f,this).onSync("escKeyed",
h,this).onSync("upKeyed",k,this).onSync("downKeyed",l,this).onSync("leftKeyed",r,this).onSync("rightKeyed",q,this).onSync("queryChanged",m,this).onSync("whitespaceChanged",A,this).onSync("langDirChanged",this._onLangDirChanged,this)}function e(b){var c=[].slice.call(arguments,1);return function(){var d=[].slice.call(arguments);a.each(c,function(a){return b[a].apply(b,d)})}}return a.mixin(h.prototype,{_hacks:function(){var c=this.input.$input||b("<div>");var e=this.menu.$node||b("<div>");c.on("blur.tt",
function(b){var d=document.activeElement;var g=e.is(d);d=0<e.has(d).length;a.isMsie()&&(g||d)&&(b.preventDefault(),b.stopImmediatePropagation(),a.defer(function(){c.focus()}))});e.on("mousedown.tt",function(a){a.preventDefault()})},_onSelectableClicked:function(a,b){this.select(b)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(a,b,d,e){this._updateHint();this.eventBus.trigger("render",d,e,b)},_onAsyncRequested:function(a,b,d){this.eventBus.trigger("asyncrequest",d,b)},
_onAsyncCanceled:function(a,b,d){this.eventBus.trigger("asynccancel",d,b)},_onAsyncReceived:function(a,b,d){this.eventBus.trigger("asyncreceive",d,b)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())&&this.select(c)&&b.preventDefault()},_onTabKeyed:function(a,b){var c;(c=this.menu.getActiveSelectable())?
this.select(c)&&b.preventDefault():(c=this.menu.getTopSelectable())&&this.autocomplete(c)&&b.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(a,
b){this._minLengthMet(b)?this.menu.update(b):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(a,b){this.dir!==b&&(this.dir=b,this.menu.setLanguageDirection(b))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(b){return b=a.isString(b)?b:this.input.getQuery()||"",b.length>=this.minLength},_updateHint:function(){var b,e,d,f;var h=this.menu.getTopSelectable();h=this.menu.getSelectableData(h);var k=this.input.getInputValue();
!h||a.isBlankString(k)||this.input.hasOverflow()?this.input.clearHint():(b=t.normalizeQuery(k),e=a.escapeRegExChars(b),d=new RegExp("^(?:"+e+")(.+$)","i"),f=d.exec(h.val),f&&this.input.setHint(k+f[1]))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),
!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),
!this.isOpen()},setVal:function(b){this.input.setQuery(a.toStr(b))},getVal:function(){return this.input.getQuery()},select:function(a){return(a=this.menu.getSelectableData(a))&&!this.eventBus.before("select",a.obj)?(this.input.setQuery(a.val,!0),this.eventBus.trigger("select",a.obj),this.close(),!0):!1},autocomplete:function(a){var b,c,e;return b=this.input.getQuery(),c=this.menu.getSelectableData(a),e=c&&b!==c.val,e&&!this.eventBus.before("autocomplete",c.obj)?(this.input.setQuery(c.val),this.eventBus.trigger("autocomplete",
c.obj),!0):!1},moveCursor:function(a){var b,c,e,h,k;return b=this.input.getQuery(),c=this.menu.selectableRelativeToCursor(a),e=this.menu.getSelectableData(c),h=e?e.obj:null,k=this._minLengthMet()&&this.menu.update(b),k||this.eventBus.before("cursorchange",h)?!1:(this.menu.setCursor(c),e?this.input.setInputValue(e.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",h),!0)},destroy:function(){this.input.destroy();this.menu.destroy()}}),h}();!function(){function h(a,
c){a.each(function(){var a,d=b(this);(a=d.data(v.typeahead))&&c(a,d)})}function e(a,b){return a.clone().addClass(b.classes.hint).removeData().css(b.css.hint).css(g(a)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"new-password",spellcheck:"false",tabindex:-1})}function c(a,b){a.data(v.attrs,{dir:a.attr("dir"),autocomplete:a.attr("autocomplete"),spellcheck:a.attr("spellcheck"),style:a.attr("style")});a.addClass(b.classes.input).attr({autocomplete:"new-password",
spellcheck:!1});try{!a.attr("dir")&&a.attr("dir","auto")}catch(z){}return a}function g(a){return{backgroundAttachment:a.css("background-attachment"),backgroundClip:a.css("background-clip"),backgroundColor:a.css("background-color"),backgroundImage:a.css("background-image"),backgroundOrigin:a.css("background-origin"),backgroundPosition:a.css("background-position"),backgroundRepeat:a.css("background-repeat"),backgroundSize:a.css("background-size")}}function d(b){var c=b.data(v.www);var d=b.parent().filter(c.selectors.wrapper);
a.each(b.data(v.attrs),function(c,d){a.isUndefined(c)?b.removeAttr(d):b.attr(d,c)});b.removeData(v.typeahead).removeData(v.www).removeData(v.attr).removeClass(c.classes.input);d.length&&(b.detach().insertAfter(d),d.remove())}function f(c){var d,e;return d=a.isJQuery(c)||a.isElement(c),e=d?b(c).first():[],e.length?e:null}var l=b.fn.typeahead;var v={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"};var n={initialize:function(d,g){var h;return g=a.isArray(g)?g:[].slice.call(arguments,1),d=d||{},
h=k(d.classNames),this.each(function(){a.each(g,function(a){a.highlight=!!d.highlight});var k=b(this);var l=b(h.html.wrapper);var r=f(d.hint);var p=f(d.menu);var x=!1!==d.hint&&!r;var z=!1!==d.menu&&!p;x&&(r=e(k,h));z&&(p=b(h.html.menu).css(h.css.menu));r&&r.val("");k=c(k,h);(x||z)&&(l.css(h.css.wrapper),k.css(x?h.css.input:h.css.inputWithNoHint),k.wrap(l).parent().prepend(x?r:null).append(z?p:null));x=z?w:u;l=new m({el:k});r=new t({hint:r,input:k},h);p=new x({node:p,datasets:g},h);p=new q({input:r,
menu:p,eventBus:l,minLength:d.minLength},h);k.data(v.www,h);k.data(v.typeahead,p)})},isEnabled:function(){var a;return h(this.first(),function(b){a=b.isEnabled()}),a},enable:function(){return h(this,function(a){a.enable()}),this},disable:function(){return h(this,function(a){a.disable()}),this},isActive:function(){var a;return h(this.first(),function(b){a=b.isActive()}),a},activate:function(){return h(this,function(a){a.activate()}),this},deactivate:function(){return h(this,function(a){a.deactivate()}),
this},isOpen:function(){var a;return h(this.first(),function(b){a=b.isOpen()}),a},open:function(){return h(this,function(a){a.open()}),this},close:function(){return h(this,function(a){a.close()}),this},select:function(a){var c=!1,d=b(a);return h(this.first(),function(a){c=a.select(d)}),c},autocomplete:function(a){var c=!1,d=b(a);return h(this.first(),function(a){c=a.autocomplete(d)}),c},moveCursor:function(a){var b=!1;return h(this.first(),function(c){b=c.moveCursor(a)}),b},val:function(a){var b;
return arguments.length?(h(this,function(b){b.setVal(a)}),this):(h(this.first(),function(a){b=a.getVal()}),b)},destroy:function(){return h(this,function(a,b){d(b);a.destroy()}),this}};b.fn.typeahead=function(a){return n[a]?n[a].apply(this,[].slice.call(arguments,1)):n.initialize.apply(this,arguments)};b.fn.typeahead.noConflict=function(){return b.fn.typeahead=l,this}}()});
!function(b,a){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(k){return b.Bloodhound=a(k)}):"object"==typeof exports?module.exports=a(require("jquery")):b.Bloodhound=a(jQuery)}(this,function(b){var a=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(a){return!a||/^\s*$/.test(a)},escapeRegExChars:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,
"\\$&")},isString:function(a){return"string"==typeof a},isNumber:function(a){return"number"==typeof a},isArray:b.isArray,isFunction:b.isFunction,isObject:b.isPlainObject,isUndefined:function(a){return"undefined"==typeof a},isElement:function(a){return!(!a||1!==a.nodeType)},isJQuery:function(a){return a instanceof b},toStr:function(b){return a.isUndefined(b)||null===b?"":b+""},bind:b.proxy,each:function(a,h){b.each(a,function(a,b){return h(b,a)})},map:b.map,filter:b.grep,every:function(a,h){var e=
!0;return a?(b.each(a,function(b,g){return(e=h.call(null,g,b,a))?void 0:!1}),!!e):e},some:function(a,h){var e=!1;return a?(b.each(a,function(b,g){return(e=h.call(null,g,b,a))?!1:void 0}),!!e):e},mixin:b.extend,identity:function(a){return a},clone:function(a){return b.extend(!0,{},a)},getIdGenerator:function(){var a=0;return function(){return a++}},templatify:function(a){function h(){return String(a)}return b.isFunction(a)?a:h},defer:function(a){setTimeout(a,0)},debounce:function(a,b,e){var c,g;return function(){var d,
f,h=this,k=arguments;return d=function(){c=null;e||(g=a.apply(h,k))},f=e&&!c,clearTimeout(c),c=setTimeout(d,b),f&&(g=a.apply(h,k)),g}},throttle:function(a,b){var e,c,g,d,f,h;return f=0,h=function(){f=new Date;g=null;d=a.apply(e,c)},function(){var k=new Date,l=b-(k-f);return e=this,c=arguments,0>=l?(clearTimeout(g),g=null,f=k,d=a.apply(e,c)):g||(g=setTimeout(h,l)),d}},stringify:function(b){return a.isString(b)?b:JSON.stringify(b)},noop:function(){}}}(),k=function(){function b(b){return b=a.toStr(b),
b?b.split(/\s+/):[]}function h(b){return b=a.toStr(b),b?b.split(/\W+/):[]}function e(b){return function(c){return c=a.isArray(c)?c:[].slice.call(arguments,0),function(d){var e=[];return a.each(c,function(c){e=e.concat(b(a.toStr(d[c])))}),e}}}return{nonword:h,whitespace:b,obj:{nonword:e(h),whitespace:e(b)}}}(),m=function(){function k(c){this.maxSize=a.isNumber(c)?c:100;this.reset();0>=this.maxSize&&(this.set=this.get=b.noop)}function h(){this.head=this.tail=null}function e(a,b){this.key=a;this.val=
b;this.prev=this.next=null}return a.mixin(k.prototype,{set:function(a,b){var c,f=this.list.tail;this.size>=this.maxSize&&(this.list.remove(f),delete this.hash[f.key],this.size--);(c=this.hash[a])?(c.val=b,this.list.moveToFront(c)):(c=new e(a,b),this.list.add(c),this.hash[a]=c,this.size++)},get:function(a){return(a=this.hash[a])?(this.list.moveToFront(a),a.val):void 0},reset:function(){this.size=0;this.hash={};this.list=new h}}),a.mixin(h.prototype,{add:function(a){this.head&&(a.next=this.head,this.head.prev=
a);this.head=a;this.tail=this.tail||a},remove:function(a){a.prev?a.prev.next=a.next:this.head=a.next;a.next?a.next.prev=a.prev:this.tail=a.prev},moveToFront:function(a){this.remove(a);this.add(a)}}),k}(),l=function(){function k(b,g){this.prefix=["__",b,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+a.escapeRegExChars(this.prefix));this.ls=g||e;!this.ls&&this._noop()}function h(b){return JSON.stringify(a.isUndefined(b)?null:b)}try{var e=window.localStorage;e.setItem("~~~","!");
e.removeItem("~~~")}catch(c){e=null}return a.mixin(k.prototype,{_prefix:function(a){return this.prefix+a},_ttlKey:function(a){return this._prefix(a)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=a.noop},_safeSet:function(a,b){try{this.ls.setItem(a,b)}catch(d){"QuotaExceededError"===d.name&&(this.clear(),this._noop())}},get:function(a){return this.isExpired(a)&&this.remove(a),b.parseJSON(this.ls.getItem(this._prefix(a)))},set:function(b,e,d){return a.isNumber(d)?
this._safeSet(this._ttlKey(b),h((new Date).getTime()+d)):this.ls.removeItem(this._ttlKey(b)),this._safeSet(this._prefix(b),h(e))},remove:function(a){return this.ls.removeItem(this._ttlKey(a)),this.ls.removeItem(this._prefix(a)),this},clear:function(){var a=this.keyMatcher;var b,d,f=[],h=e.length;for(b=0;h>b;b++)(d=e.key(b)).match(a)&&f.push(d.replace(a,""));for(a=f.length;a--;)this.remove(f[a]);return this},isExpired:function(c){c=b.parseJSON(this.ls.getItem(this._ttlKey(c)));return a.isNumber(c)&&
(new Date).getTime()>c?!0:!1}}),k}(),n=function(){function k(a){a=a||{};this.cancelled=!1;this.lastReq=null;this._send=a.transport;this._get=a.limiter?a.limiter(this._get):this._get;this._cache=!1===a.cache?new m(0):g}var h=0,e={},c=6,g=new m(10);return k.setMaxPendingRequests=function(a){c=a},k.resetCache=function(){g.reset()},a.mixin(k.prototype,{_fingerprint:function(a){return a=a||{},a.url+a.type+b.param(a.data||{})},_get:function(a,b){function d(a){b(null,a);l._cache.set(m,a)}function f(){b(!0)}
function g(){h--;delete e[m];l.onDeckRequestArgs&&(l._get.apply(l,l.onDeckRequestArgs),l.onDeckRequestArgs=null)}var k,l=this;var m=this._fingerprint(a);this.cancelled||m!==this.lastReq||((k=e[m])?k.done(d).fail(f):c>h?(h++,e[m]=this._send(a).done(d).fail(f).always(g)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(c,e){var d;e=e||b.noop;c=a.isString(c)?{url:c}:c||{};var f=this._fingerprint(c);this.cancelled=!1;this.lastReq=f;(d=this._cache.get(f))?e(null,d):this._get(c,e)},cancel:function(){this.cancelled=
!0}}),k}(),t=window.SearchIndex=function(){function k(c){c=c||{};c.datumTokenizer&&c.queryTokenizer||b.error("datumTokenizer and queryTokenizer are both required");this.identify=c.identify||a.stringify;this.datumTokenizer=c.datumTokenizer;this.queryTokenizer=c.queryTokenizer;this.reset()}function h(b){return b=a.filter(b,function(a){return!!a}),b=a.map(b,function(a){return a.toLowerCase()})}function e(){var a={};return a[d]=[],a[g]={},a}function c(a){for(var b={},c=[],d=0,e=a.length;e>d;d++)b[a[d]]||
(b[a[d]]=!0,c.push(a[d]));return c}var g="c",d="i";return a.mixin(k.prototype,{bootstrap:function(a){this.datums=a.datums;this.trie=a.trie},add:function(b){var c=this;b=a.isArray(b)?b:[b];a.each(b,function(b){var f;c.datums[f=c.identify(b)]=b;b=h(c.datumTokenizer(b));a.each(b,function(a){var b;var h=c.trie;for(a=a.split("");b=a.shift();)h=h[g][b]||(h[g][b]=e()),h[d].push(f)})})},get:function(b){var c=this;return a.map(b,function(a){return c.datums[a]})},search:function(b){var e,f,k=this;return e=
h(this.queryTokenizer(b)),a.each(e,function(a){var b;if(f&&0===f.length)return!1;var c=k.trie;for(a=a.split("");c&&(b=a.shift());)c=c[g][b];if(c&&0===a.length){b=c[d].slice(0);if(f){c=f;var e=a=0,h=[];c=c.sort();b=b.sort();for(var l=c.length,m=b.length;l>a&&m>e;)c[a]<b[e]?a++:c[a]>b[e]?e++:(h.push(c[a]),a++,e++);c=h}else c=b;c=void(f=c)}else c=(f=[],!1);return c}),f?a.map(c(f),function(a){return k.datums[a]}):[]},all:function(){var a=[],b;for(b in this.datums)a.push(this.datums[b]);return a},reset:function(){this.datums=
{};this.trie=e()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),k}(),y=function(){function b(a){this.url=a.url;this.ttl=a.ttl;this.cache=a.cache;this.prepare=a.prepare;this.transform=a.transform;this.transport=a.transport;this.thumbprint=a.thumbprint;this.storage=new l(a.cacheKey)}var h;return h={data:"data",protocol:"protocol",thumbprint:"thumbprint"},a.mixin(b.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(a){this.cache&&(this.storage.set(h.data,
a,this.ttl),this.storage.set(h.protocol,location.protocol,this.ttl),this.storage.set(h.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var a,b,g,d;return this.cache?(b=this.storage.get(h.data),g=this.storage.get(h.protocol),d=this.storage.get(h.thumbprint),a=d!==this.thumbprint||g!==location.protocol,b&&!a?b:null):null},fromNetwork:function(a){function b(){a(!0)}function e(b){a(null,f.transform(b))}var d,f=this;a&&(d=this.prepare(this._settings()),this.transport(d).fail(b).done(e))},clear:function(){return this.storage.clear(),
this}}),b}(),u=function(){function b(a){this.url=a.url;this.prepare=a.prepare;this.transform=a.transform;this.transport=new n({cache:a.cache,limiter:a.limiter,transport:a.transport})}return a.mixin(b.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(a,b){function c(a,c){b(a?[]:d.transform(c))}var e,d=this;if(b)return a=a||"",e=this.prepare(a,this._settings()),this.transport.get(e,c)},cancelLastRequest:function(){this.transport.cancel()}}),b}(),w=function(){function k(c){var d;
return c?(d={url:null,ttl:864E5,cache:!0,cacheKey:null,thumbprint:"",prepare:a.identity,transform:a.identity,transport:null},c=a.isString(c)?{url:c}:c,c=a.mixin(d,c),!c.url&&b.error("prefetch requires url to be set"),c.transform=c.filter||c.transform,c.cacheKey=c.cacheKey||c.url,c.thumbprint="0.11.1"+c.thumbprint,c.transport=c.transport?g(c.transport):b.ajax,c):null}function h(d){var f;if(d)return f={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,
transform:a.identity,transport:null},d=a.isString(d)?{url:d}:d,d=a.mixin(f,d),!d.url&&b.error("remote requires url to be set"),d.transform=d.filter||d.transform,d.prepare=e(d),d.limiter=c(d),d.transport=d.transport?g(d.transport):b.ajax,delete d.replace,delete d.wildcard,delete d.rateLimitBy,delete d.rateLimitWait,d}function e(a){function b(a,b){return b.url=g(b.url,a),b}function c(a,b){return b.url=b.url.replace(h,encodeURIComponent(a)),b}function d(a,b){return b}var e,g,h;return e=a.prepare,g=a.replace,
h=a.wildcard,e?e:e=g?b:a.wildcard?c:d}function c(b){function c(b){return function(c){return a.debounce(c,b)}}function d(b){return function(c){return a.throttle(c,b)}}var e,g,h;return e=b.limiter,g=b.rateLimitBy,h=b.rateLimitWait,e||(e=/^throttle$/i.test(g)?d(h):c(h)),e}function g(c){return function(d){var e=b.Deferred();return c(d,function(b){a.defer(function(){e.resolve(b)})},function(b){a.defer(function(){e.reject(b)})}),e}}return function(c){var d,e;return d={initialize:!0,identify:a.stringify,
datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},c=a.mixin(d,c||{}),!c.datumTokenizer&&b.error("datumTokenizer is required"),!c.queryTokenizer&&b.error("queryTokenizer is required"),e=c.sorter,c.sorter=e?function(a){return a.sort(e)}:a.identity,c.local=a.isFunction(c.local)?c.local():c.local,c.prefetch=k(c.prefetch),c.remote=h(c.remote),c}}();return function(){function l(a){a=w(a);this.sorter=a.sorter;this.identify=a.identify;this.sufficient=a.sufficient;
this.local=a.local;this.remote=a.remote?new u(a.remote):null;this.prefetch=a.prefetch?new y(a.prefetch):null;this.index=new t({identify:this.identify,datumTokenizer:a.datumTokenizer,queryTokenizer:a.queryTokenizer});!1!==a.initialize&&this.initialize()}var h;return h=window&&window.Bloodhound,l.noConflict=function(){return window&&(window.Bloodhound=h),l},l.tokenizers=k,a.mixin(l.prototype,{__ttAdapter:function(){function a(a,b,c){return g.search(a,b,c)}function b(a,b){return g.search(a,b)}var g=
this;return this.remote?a:b},_loadPrefetch:function(){function a(a,b){return a?c.reject():(d.add(b),d.prefetch.store(d.index.serialize()),void c.resolve())}var c,g,d=this;return c=b.Deferred(),this.prefetch?(g=this.prefetch.fromCache())?(this.index.bootstrap(g),c.resolve()):this.prefetch.fromNetwork(a):c.resolve(),c.promise()},_initialize:function(){var a=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(function(){a.add(a.local)}),this.initPromise},initialize:function(a){return!this.initPromise||
a?this._initialize():this.initPromise},add:function(a){return this.index.add(a),this},get:function(b){return b=a.isArray(b)?b:[].slice.call(arguments),this.index.get(b)},search:function(b,c,g){function d(b){var c=[];a.each(b,function(b){!a.some(e,function(a){return h.identify(b)===h.identify(a)})&&c.push(b)});g&&g(c)}var e,h=this;return e=this.sorter(this.index.search(b)),c(this.remote?e.slice():e),this.remote&&e.length<this.sufficient?this.remote.get(b,d):this.remote&&this.remote.cancelLastRequest(),
this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return n.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),l}()});
